import{a as e}from"./index-DY0DW88M.js";import{p as o}from"./promisifiedChrome-B6V9WMyE.js";let r=null;const s="bookmarks:permissions:favicon:dismissed",t={favicon(o,r=16){var s,t;if(!(null==(t=null==(s=window.chrome)?void 0:s.runtime)?void 0:t.getURL)||!e.isChrome())return e.getFaviconUrl(o);const n=new URL(chrome.runtime.getURL("/_favicon/"));return n.searchParams.set("pageUrl",o),n.searchParams.set("size",r),n.toString()},open(o){m.models.bookmarksSettings.get("openInNewTab")&&e.getBrowser().tabs?e.getBrowser().tabs.create({url:o,active:!1}):e.getBrowser().tabs.update({url:o}),e.getBrowser().tabs||(m.models.bookmarksSettings.get("openInNewTab")?window.open(o,"_blank"):window.open(o,"_self"))},openInNewTab(o){e.getBrowser().tabs?e.getBrowser().tabs.create({url:o,active:!1}):window.open(o,"_blank")},async requestFaviconPermissionIfNeeded(t){if(!e.isChrome())return!0;if(r)return r;if(!(await o.permissions.contains({permissions:["favicon"]}))){r=new Promise((e=>{m.cmd("modal.open","FAVICON_PERMISSION",{componentProps:{resolve:e,hasDismissedPreviously:"true"===localStorage.getItem(s),source:t}})}));const e=await r;return e?location.reload():localStorage.setItem(s,!0),r=null,e}}};export{t as b};
const e={};const t={name:"InlineSvg",inheritAttrs:!1,render(e){return this.svgElSource?e("svg",{on:this.$listeners,attrs:Object.assign(this.getSvgAttrs(this.svgElSource),(t=this.$attrs,Object.keys(t).reduce(((e,n)=>(!1!==t[n]&&null!==t[n]&&void 0!==t[n]&&(e[n]=t[n]),e)),{}))),domProps:{innerHTML:this.getSvgContent(this.svgElSource)}}):null;var t},props:{src:{type:String,required:!0},title:{type:String},transformSource:{type:Function,default:e=>e},keepDuringLoading:{type:Boolean,default:!0}},data:()=>({svgElSource:null}),watch:{src(e){this.getSource(e)}},mounted(){this.getSource(this.src)},methods:{getSvgAttrs(e){let t={};const n=e.attributes;if(!n)return t;for(let s=n.length-1;s>=0;s--)t[n[s].name]=n[s].value;return t},getSvgContent(e){return e=e.cloneNode(!0),e=this.transformSource(e),this.title&&function(e,t){const n=e.getElementsByTagName("title");if(n.length)n[0].textContent=t;else{const n=document.createElementNS("http://www.w3.org/2000/svg","title");n.textContent=t,e.insertBefore(n,e.firstChild)}}(e,this.title),e.innerHTML},getSource(t){e[t]||(e[t]=this.download(t)),this.svgElSource&&e[t].getIsPending()&&!this.keepDuringLoading&&(this.svgElSource=null,this.$emit("unloaded")),e[t].then((e=>{this.svgElSource=e,this.$nextTick((()=>{this.$emit("loaded",this.$el)}))})).catch((n=>{this.svgElSource&&(this.svgElSource=null,this.$emit("unloaded")),delete e[t],this.$emit("error",n)}))},download:e=>function(e){if(e.getIsPending)return e;let t=!0,n=e.then((e=>(t=!1,e)),(e=>{throw t=!1,e}));return n.getIsPending=function(){return t},n}(new Promise(((t,n)=>{const s=new XMLHttpRequest;s.open("GET",e,!0),s.onload=()=>{if(s.status>=200&&s.status<400)try{const e=new DOMParser;let i=e.parseFromString(s.responseText,"text/xml").getElementsByTagName("svg")[0];i?t(i):n(new Error('Loaded file is not valid SVG"'))}catch(e){n(e)}else n(new Error("Error loading SVG"))},s.onerror=n,s.send()})))}};const n={install(e){e.component("inline-svg",t)}};let s={};const i={bind:function(e,t){let n,i;e.dataset.justBoundClickOutsideHandler=!0,setTimeout((()=>{e.dataset.justBoundClickOutsideHandler=!1}),100);const d=e=>{i=!1,(e=>e&&e.clientX>window.innerWidth)(e)?i=!0:n=e.target},o=s=>{i||(t.modifiers.bubble||!e.contains(n)&&!e.contains(s.target)&&e!==n&&e!==s.target&&"true"!==e.dataset.justBoundClickOutsideHandler)&&t.value(s)};e.dataset.clickOutsideMouseupHandlerId=Math.random().toString(36).substring(7),e.dataset.clickOutsideMousedownHandlerId=Math.random().toString(36).substring(7),s[e.dataset.clickOutsideMouseupHandlerId]=o,s[e.dataset.clickOutsideMousedownHandlerId]=d,document.addEventListener("mouseup",o),document.addEventListener("mousedown",d)},unbind:function(e){var t,n;(null==(t=e.dataset)?void 0:t.clickOutsideMouseupHandlerId)&&(null==(n=e.dataset)?void 0:n.clickOutsideMousedownHandlerId)&&(document.removeEventListener("mouseup",s[e.dataset.clickOutsideMouseupHandlerId]),document.removeEventListener("mousedown",s[e.dataset.clickOutsideMousedownHandlerId]),delete s[e.dataset.clickOutsideMouseupHandlerId],delete s[e.dataset.clickOutsideMousedownHandlerId],delete e.dataset.clickOutsideMouseupHandlerId,delete e.dataset.clickOutsideMousedownHandlerId,delete e.dataset.justBoundClickOutsideHandler)}};export{i as C,n as I};
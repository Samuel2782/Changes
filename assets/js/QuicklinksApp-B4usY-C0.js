import{aA as t,g as e,I as n,r as i}from"./index-DY0DW88M.js";import l from"./AppPopup-whOF9ytj.js";import{useLinksViewStateStore as s}from"./linksViewState-BOoTqpGc.js";import{d as o}from"./constants-Bt_TxKWw.js";import{a}from"./modal-CXkRDJ21.js";import{U as r}from"./enums-C0TfsRui.js";import{e as c}from"./DataSyncService-BnTv72BN.js";import{h as d}from"./handlebarLoader-xbtIzd6B.js";import{n as u}from"./_plugin-vue2_normalizer-DeUNqxFl.js";import"./Logger-CErMjlBd.js";import"./style-cpFB66wV.js";import"./ResizeSensor-ZXOsDHeC.js";import"./globalKeyEventManager-Dw4DvSNm.js";import"./ViewState-DzCxxm0h.js";import"./appZStack-B9FmF8l5.js";var h="https://api.momentumdash.com/";const p={1:function(t,e,n,i,l){return'<span class="badge badge-plus">PLUS</span>'},compiler:[8,">= 4.3.0"],main:function(t,e,n,i,l){var s,o,a=null!=e?e:t.nullContext||{},r=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return'<div class="subview links-add">\n\t<header class="header">\n\t\t<span class="control icon-wrapper back"><i class="icon icon-left"></i></span>\n\n\t\t<div class="edit-mode controls">\n\t\t\t<div class="control more">\n\t\t\t\t<div class="icon-wrapper more-toggle">\n\t\t\t\t\t'+(null!=(s="function"==typeof(o=null!=(o=r(n,"iconEllipsis")||(null!=e?r(e,"iconEllipsis"):e))?o:t.hooks.helperMissing)?o.call(a,{name:"iconEllipsis",hash:{},data:l,loc:{start:{line:8,column:5},end:{line:8,column:25}}}):o)?s:"")+'</div>\n\n\t\t\t\t<div class="dropdown more-dropdown">\n\t\t\t\t\t<ul class="dropdown-list">\n\t\t\t\t\t\t<li class="dropdown-list-item delete">Delete</li>\n\t\t\t\t\t</ul>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</header>\n\n\t<div class="body">\n\t\t<div class="input-group">\n\t\t\t<label>Name</label>\n\t\t\t<input type="text" id="new-title" class="new-title new-group-title" autocomplete="off">\n\t\t</div>\n\t\t<div class="link-urls-wrapper">\n\t\t\t<div class="link-urls">\n\t\t\t\t<label>Links</label>\n\t\t\t\t<ol class="urls"></ol>\n\n\t\t\t\t<input type="text" id="new-url" class="new-url new-group-url" placeholder="example.com" autocapitalize="off" autocomplete="off" autocorrect="off">\n\n\t\t\t\t<div class="button button-small button-clear add-tab">\n\t\t\t\t\t<span class="button-label">\n\t\t\t\t\t\t<svg class="icon icon-plus" viewBox="0 0 448 448" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="m408 184h-136c-4.417969 0-8-3.582031-8-8v-136c0-22.089844-17.910156-40-40-40s-40 17.910156-40 40v136c0 4.417969-3.582031 8-8 8h-136c-22.089844 0-40 17.910156-40 40s17.910156 40 40 40h136c4.417969 0 8 3.582031 8 8v136c0 22.089844 17.910156 40 40 40s40-17.910156 40-40v-136c0-4.417969 3.582031-8 8-8h136c22.089844 0 40-17.910156 40-40s-17.910156-40-40-40zm0 0"/></svg>\n\t\t\t\t\t\tAdd another tab\n\t\t\t\t\t</span>\n\t\t\t\t\t'+(null!=(s=r(n,"unless").call(a,null!=e?r(e,"isPlus"):e,{name:"unless",hash:{},fn:t.program(1,l,0),inverse:t.noop,data:l,loc:{start:{line:36,column:5},end:{line:36,column:76}}}))?s:"")+'\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div>\n\t\t\t<span class="button create" data-test="link-save">Create</span>\n\t\t\t<span class="button update" data-test="link-update">Save</span>\n\t\t</div>\n\t</div>\n</div>\n'},useData:!0},g={1:function(t,e,n,i,l){return" has-dash-icon pinned"},3:function(t,e,n,i,l){return" has-more"},5:function(t,e,n,i,l){var s,o=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return'title="'+t.escapeExpression("function"==typeof(s=null!=(s=o(n,"summaryText")||(null!=e?o(e,"summaryText"):e))?s:t.hooks.helperMissing)?s.call(null!=e?e:t.nullContext||{},{name:"summaryText",hash:{},data:l,loc:{start:{line:3,column:85},end:{line:3,column:100}}}):s)+'"'},7:function(t,e,n,i,l){return' class="local"'},9:function(t,e,n,i,l){var s,o=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return null!=(s=o(n,"if").call(null!=e?e:t.nullContext||{},null!=e?o(e,"hasUrls"):e,{name:"if",hash:{},fn:t.program(10,l,0),inverse:t.program(12,l,0),data:l,loc:{start:{line:5,column:3},end:{line:13,column:10}}}))?s:""},10:function(t,e,n,i,l){var s,o=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return'\t\t\t\t<span class="icon-folder-label">'+t.escapeExpression("function"==typeof(s=null!=(s=o(n,"iconLabel")||(null!=e?o(e,"iconLabel"):e))?s:t.hooks.helperMissing)?s.call(null!=e?e:t.nullContext||{},{name:"iconLabel",hash:{},data:l,loc:{start:{line:6,column:36},end:{line:6,column:49}}}):s)+'</span><svg class="icon-svg icon-folder" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 27 23"><g fill="none" fill-rule="evenodd"><path id="icon-folder-single" d="M22 20H2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h6.5a2 2 0 0 1 1.787 1.1l.81 1.62a.5.5 0 0 0 .448.28H22a2 2 0 0 1 2 2v13a2 2 0 0 1-2 2zM8.191 2H2.5a.5.5 0 0 0-.5.5v15a.5.5 0 0 0 .5.5h19a.5.5 0 0 0 .5-.5v-12a.5.5 0 0 0-.5-.5H11.236a2 2 0 0 1-1.788-1.1l-.81-1.619A.5.5 0 0 0 8.191 2z"; fill-rule="nonzero"/><path id="icon-folder-multiple" d="M26.24 9.2v11.591c0 .63-.512 1.143-1.142 1.143H9.3" stroke-linecap="round" stroke-linejoin="round"/></g></svg>\n'},12:function(t,e,n,i,l){var s,o=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return null!=(s=o(n,"if").call(null!=e?e:t.nullContext||{},null!=e?o(e,"favicon_url"):e,{name:"if",hash:{},fn:t.program(13,l,0),inverse:t.program(15,l,0),data:l,loc:{start:{line:8,column:4},end:{line:12,column:11}}}))?s:""},13:function(t,e,n,i,l){var s,o=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return'\t\t\t\t\t<img class="icon-favicon" src="'+t.escapeExpression("function"==typeof(s=null!=(s=o(n,"favicon_url")||(null!=e?o(e,"favicon_url"):e))?s:t.hooks.helperMissing)?s.call(null!=e?e:t.nullContext||{},{name:"favicon_url",hash:{},data:l,loc:{start:{line:9,column:36},end:{line:9,column:51}}}):s)+'">\n'},15:function(t,e,n,i,l){return'\t\t\t\t\t<span class="link-icon-placeholder">&nbsp;</span>\n'},17:function(t,e,n,i,l){var s,o=null!=e?e:t.nullContext||{},a=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return(null!=(s=a(n,"unless").call(o,null!=e?a(e,"readOnly"):e,{name:"unless",hash:{},fn:t.program(18,l,0),inverse:t.noop,data:l,loc:{start:{line:18,column:2},end:{line:46,column:13}}}))?s:"")+(null!=(s=a(n,"if").call(o,null!=e?a(e,"readOnly"):e,{name:"if",hash:{},fn:t.program(35,l,0),inverse:t.noop,data:l,loc:{start:{line:47,column:2},end:{line:53,column:9}}}))?s:"")},18:function(t,e,n,i,l){var s,o=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return null!=(s=o(n,"if").call(null!=e?e:t.nullContext||{},null!=e?o(e,"noMenu"):e,{name:"if",hash:{},fn:t.program(19,l,0),inverse:t.program(24,l,0),data:l,loc:{start:{line:19,column:3},end:{line:45,column:10}}}))?s:""},19:function(t,e,n,i,l){var s,o=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return'\t\t\t\t<div class="icon-wrapper '+(null!=(s=o(n,"if").call(null!=e?e:t.nullContext||{},null!=e?o(e,"editing"):e,{name:"if",hash:{},fn:t.program(20,l,0),inverse:t.program(22,l,0),data:l,loc:{start:{line:20,column:29},end:{line:20,column:79}}}))?s:"")+'"><svg fill="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 212.982 212.982" class="icon icon-hide"><path d="M131.804 106.491l75.936-75.936c6.99-6.99 6.99-18.323 0-25.312-6.99-6.99-18.322-6.99-25.312 0L106.491 81.18 30.554 5.242c-6.99-6.99-18.322-6.99-25.312 0-6.989 6.99-6.989 18.323 0 25.312l75.937 75.936-75.937 75.937c-6.989 6.99-6.989 18.323 0 25.312 6.99 6.99 18.322 6.99 25.312 0l75.937-75.937 75.937 75.937c6.989 6.99 18.322 6.99 25.312 0 6.99-6.99 6.99-18.322 0-25.312l-75.936-75.936z"/></svg></div>\n'},20:function(t,e,n,i,l){return"draft-destroy"},22:function(t,e,n,i,l){return"destroy"},24:function(t,e,n,i,l){var s,o=null!=e?e:t.nullContext||{},a=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return'\t\t\t\t<div class="more'+(null!=(s=a(n,"if").call(o,null!=e?a(e,"pinned"):e,{name:"if",hash:{},fn:t.program(25,l,0),inverse:t.noop,data:l,loc:{start:{line:22,column:20},end:{line:22,column:51}}}))?s:"")+'">\n\t\t\t\t\t<div class="icon-wrapper more-toggle'+(null!=(s=a(n,"if").call(o,null!=e?a(e,"pinned"):e,{name:"if",hash:{},fn:t.program(27,l,0),inverse:t.noop,data:l,loc:{start:{line:23,column:41},end:{line:23,column:80}}}))?s:"")+'">\n\t\t\t\t\t\t'+(null!=(s=(a(n,"iconEllipsis")||e&&a(e,"iconEllipsis")||t.hooks.helperMissing).call(o,null!=e?a(e,"ellipsisIconClass"):e,{name:"iconEllipsis",hash:{},data:l,loc:{start:{line:24,column:6},end:{line:24,column:44}}}))?s:"")+'\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="dropdown more-dropdown '+(null!=(s=a(n,"if").call(o,null!=e?a(e,"pinned"):e,{name:"if",hash:{},fn:t.program(29,l,0),inverse:t.noop,data:l,loc:{start:{line:26,column:40},end:{line:26,column:101}}}))?s:"")+'">\n\t\t\t\t\t\t<ul class="dropdown-list">\n'+(null!=(s=a(n,"if").call(o,null!=e?a(e,"showPinOption"):e,{name:"if",hash:{},fn:t.program(31,l,0),inverse:t.noop,data:l,loc:{start:{line:28,column:7},end:{line:33,column:14}}}))?s:"")+(null!=(s=a(n,"if").call(o,null!=e?a(e,"isGroup"):e,{name:"if",hash:{},fn:t.program(33,l,0),inverse:t.noop,data:l,loc:{start:{line:34,column:7},end:{line:38,column:14}}}))?s:"")+'\t\t\t\t\t\t\t<li class="dropdown-list-item destroy">\n\t\t\t\t\t\t\t\t<span class="item-label">Delete</span>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n'},25:function(t,e,n,i,l){return" more-dash"},27:function(t,e,n,i,l){return" dash-icon-wrapper"},29:function(t,e,n,i,l){return"app dash-dropdown nipple nipple-top-left"},31:function(t,e,n,i,l){var s,o=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return'\t\t\t\t\t\t\t<li class="dropdown-list-item link-pin toggleable '+t.escapeExpression("function"==typeof(s=null!=(s=o(n,"pinnedClass")||(null!=e?o(e,"pinnedClass"):e))?s:t.hooks.helperMissing)?s.call(null!=e?e:t.nullContext||{},{name:"pinnedClass",hash:{},data:l,loc:{start:{line:29,column:57},end:{line:29,column:72}}}):s)+'">\n\t\t\t\t\t\t\t\t<span class="item-label pin">Pin</span>\n\t\t\t\t\t\t\t\t<span class="item-label unpin">Unpin</span>\n\t\t\t\t\t\t\t</li>\n'},33:function(t,e,n,i,l){return'\t\t\t\t\t\t\t<li class="dropdown-list-item detail">\n\t\t\t\t\t\t\t\t<span class="item-label">Edit</span>\n\t\t\t\t\t\t\t</li>\n'},35:function(t,e,n,i,l){return'\t\t\t<div class="more has-read-only">\n\t\t\t\t<div class="icon-wrapper">\n\t\t\t\t\t<svg class="icon icon-lock read-only" title="Admin Locked" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 328.9 402"><path d="M357.45,190.72a26.43,26.43,0,0,0-19.42-8H328.9V127.91q0-52.54-37.68-90.22T201,0q-52.55,0-90.22,37.69T73.09,127.91v54.82H64a27.28,27.28,0,0,0-27.41,27.41V374.59A27.28,27.28,0,0,0,64,402H338a27.28,27.28,0,0,0,27.41-27.41V210.13A26.43,26.43,0,0,0,357.45,190.72Zm-83.36-8H127.91V127.91q0-30.27,21.41-51.68T201,54.82q30.27,0,51.68,21.41t21.41,51.68Z" transform="translate(-36.55)"/></svg>\n\t\t\t\t</div>\n\t\t\t</div>\n'},compiler:[8,">= 4.3.0"],main:function(t,e,n,i,l){var s,o,a=null!=e?e:t.nullContext||{},r=t.hooks.helperMissing,c="function",d=t.escapeExpression,u=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return'\x3c!-- This template is used for both new and legacy links If things are refactored, for testing try manually setting the noMenu property to true--\x3e\n<div draggable="'+d(typeof(o=null!=(o=u(n,"draggable")||(null!=e?u(e,"draggable"):e))?o:r)===c?o.call(a,{name:"draggable",hash:{},data:l,loc:{start:{line:2,column:16},end:{line:2,column:29}}}):o)+'" class="link-wrapper '+d(typeof(o=null!=(o=u(n,"classes")||(null!=e?u(e,"classes"):e))?o:r)===c?o.call(a,{name:"classes",hash:{},data:l,loc:{start:{line:2,column:51},end:{line:2,column:62}}}):o)+(null!=(s=u(n,"if").call(a,null!=e?u(e,"pinned"):e,{name:"if",hash:{},fn:t.program(1,l,0),inverse:t.noop,data:l,loc:{start:{line:2,column:62},end:{line:2,column:104}}}))?s:"")+(null!=(s=u(n,"unless").call(a,null!=e?u(e,"noMenu"):e,{name:"unless",hash:{},fn:t.program(3,l,0),inverse:t.noop,data:l,loc:{start:{line:2,column:104},end:{line:2,column:142}}}))?s:"")+'">\n\t<a data-test="link-item" draggable="false" href="'+d(typeof(o=null!=(o=u(n,"url")||(null!=e?u(e,"url"):e))?o:r)===c?o.call(a,{name:"url",hash:{},data:l,loc:{start:{line:3,column:50},end:{line:3,column:57}}}):o)+'" '+(null!=(s=u(n,"if").call(a,null!=e?u(e,"summaryText"):e,{name:"if",hash:{},fn:t.program(5,l,0),inverse:t.noop,data:l,loc:{start:{line:3,column:59},end:{line:3,column:108}}}))?s:"")+" "+(null!=(s=u(n,"if").call(a,null!=e?u(e,"local"):e,{name:"if",hash:{},fn:t.program(7,l,0),inverse:t.noop,data:l,loc:{start:{line:3,column:109},end:{line:3,column:143}}}))?s:"")+">\n"+(null!=(s=u(n,"unless").call(a,null!=e?u(e,"noIcon"):e,{name:"unless",hash:{},fn:t.program(9,l,0),inverse:t.noop,data:l,loc:{start:{line:4,column:2},end:{line:14,column:13}}}))?s:"")+'\t\t<span class="link-text">'+d(typeof(o=null!=(o=u(n,"title")||(null!=e?u(e,"title"):e))?o:r)===c?o.call(a,{name:"title",hash:{},data:l,loc:{start:{line:15,column:26},end:{line:15,column:35}}}):o)+"</span>\n\t</a>\n"+(null!=(s=u(n,"if").call(a,null!=e?u(e,"showControls"):e,{name:"if",hash:{},fn:t.program(17,l,0),inverse:t.noop,data:l,loc:{start:{line:17,column:1},end:{line:54,column:8}}}))?s:"")+"</div>\n"},useData:!0},f={1:function(t,e,n,i,l){var s,o,a=null!=e?e:t.nullContext||{},r=t.hooks.helperMissing,c="function",d=t.escapeExpression,u=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return'\t\t\t\t\t\t\t<li data-momo-id="chromeTab" data-place="links" class="optional-link"><a\n\t\t\t\t\t\t\t\thref="'+d(typeof(o=null!=(o=u(n,"chromeNewTabUrl")||(null!=e?u(e,"chromeNewTabUrl"):e))?o:r)===c?o.call(a,{name:"chromeNewTabUrl",hash:{},data:l,loc:{start:{line:43,column:14},end:{line:43,column:33}}}):o)+'" data-analytics-id="browser tab" class="local">\n\t\t\t\t\t\t\t\t'+(null!=(s=(u(n,"browserIcon")||e&&u(e,"browserIcon")||r).call(a,"icon-favicon icon-svg",{name:"browserIcon",hash:{},data:l,loc:{start:{line:44,column:8},end:{line:44,column:50}}}))?s:"")+"\n\t\t\t\t\t\t\t\t"+d(typeof(o=null!=(o=u(n,"browserName")||(null!=e?u(e,"browserName"):e))?o:r)===c?o.call(a,{name:"browserName",hash:{},data:l,loc:{start:{line:45,column:8},end:{line:45,column:25}}}):o)+" Tab</a></li>\n"},compiler:[8,">= 4.3.0"],main:function(t,e,n,i,l){var s,o,a,r=null!=e?e:t.nullContext||{},c=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]},d='<header class="header app-header u--touch-only-flex">\n\t<div class="header-center">\n\t\t<div class="title-wrapper">\n\t\t\t<div class="title">Links</div>\n\t\t</div>\n\t</div>\n\n\t<div class="header-right">\n\t\t<div class="mobile-add" title="Add New Link" data-test="links-add">\n\t\t\t<span class="icon-wrapper hide">\n\t\t\t\t<svg class="icon icon-plus" fill="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 448"><path xmlns="http://www.w3.org/2000/svg" d="m408 184h-136c-4.417969 0-8-3.582031-8-8v-136c0-22.089844-17.910156-40-40-40s-40 17.910156-40 40v136c0 4.417969-3.582031 8-8 8h-136c-22.089844 0-40 17.910156-40 40s17.910156 40 40 40h136c4.417969 0 8 3.582031 8 8v136c0 22.089844 17.910156 40 40 40s40-17.910156 40-40v-136c0-4.417969 3.582031-8 8-8h136c22.089844 0 40-17.910156 40-40s-17.910156-40-40-40zm0 0"></path></svg>\n\t\t\t</span>\n\t\t</div>\n\t\t<div class="mobile-edit" title="Edit Links" data-test="links-edit">\n\t\t\t<span class="icon-wrapper hide">\n\t\t\t\t<svg class="icon icon-ellipsis" fill="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 60 60"><path d="M8 22c-4.411 0-8 3.589-8 8s3.589 8 8 8 8-3.589 8-8-3.589-8-8-8zM52 22c-4.411 0-8 3.589-8 8s3.589 8 8 8 8-3.589 8-8-3.589-8-8-8zM30 22c-4.411 0-8 3.589-8 8s3.589 8 8 8 8-3.589 8-8-3.589-8-8-8z"></path></svg>\n\t\t\t</span>\n\t\t</div>\n\t\t<div class="mobile-close" title="Close Links" data-test="links-close">\n\t\t\t<span class="icon-wrapper u--mobile-show-bg hide">\n\t\t\t\t<svg class="icon icon-hide" fill="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 348.333 348.334"><path d="M336.559 68.611L231.016 174.165l105.543 105.549c15.699 15.705 15.699 41.145 0 56.85-7.844 7.844-18.128 11.769-28.407 11.769-10.296 0-20.581-3.919-28.419-11.769L174.167 231.003 68.609 336.563c-7.843 7.844-18.128 11.769-28.416 11.769-10.285 0-20.563-3.919-28.413-11.769-15.699-15.698-15.699-41.139 0-56.85l105.54-105.549L11.774 68.611c-15.699-15.699-15.699-41.145 0-56.844 15.696-15.687 41.127-15.687 56.829 0l105.563 105.554L279.721 11.767c15.705-15.687 41.139-15.687 56.832 0 15.705 15.699 15.705 41.145.006 56.844z"/></svg>\n\t\t\t</span>\n\t\t</div>\n\t</div>\n</header>\n\n<div class="subviews-wrapper">\n\t<div class="subviews first no-transition">\x3c!--\n\n\t--\x3e<div class="subview links-main">\n\t\t\t\x3c!-- <header class="header">\n\t\t\t\t<span class="title">Links</span>\n\t\t\t\t<div class="controls">\n\t\t\t\t</div>\n\t\t\t</header> --\x3e\n\t\t\t<div class="body">\n\n\t\t\t\t<div class="loading-message message"><i class="loading-icon"></i><span class="loading-label">Loading...</span></div>\n\t\t\t\t<div class="links-lists"> \x3c!-- Not very useful in regular links, but important for consistency with teamlinks --\x3e\n\t\t\t\t\t<ol class="links-list">\n';return o=null!=(o=c(n,"isChromium")||(null!=e?c(e,"isChromium"):e))?o:t.hooks.helperMissing,a={name:"isChromium",hash:{},fn:t.program(1,l,0),inverse:t.noop,data:l,loc:{start:{line:41,column:6},end:{line:46,column:21}}},s="function"==typeof o?o.call(r,a):o,c(n,"isChromium")||(s=t.hooks.blockHelperMissing.call(e,s,a)),null!=s&&(d+=s),d+'\t\t\t\t\t</ol>\n\t\t\t\t</div>\n\n\t\t\t\t<div class="empty">\n\t\t\t\t\t<div class="title">No links yet</div>\n\t\t\t\t\t<div class="description">Add your favorite links</div>\n\t\t\t\t\t<span class="button new-toggle empty-toggle">New Link</span>\n\t\t\t\t</div>\n\n\t\t\t\t<div class="footer-input">\n\t\t\t\t\t<span class="new-toggle"><span class="icon icon-favicon icon-plus"></span> New Link</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\x3c!--\n\n\t\t--\x3e'+(null!=(s=t.invokePartial(c(n,"lookup").call(r,e,"addGroup",{name:"lookup",hash:{},data:l,loc:{start:{line:62,column:9},end:{line:62,column:30}}}),e,{data:l,helpers:n,partials:i,decorators:t.decorators}))?s:"")+"\n\n\t</div>\n</div>\n"},usePartial:!0,useData:!0},v={1:function(t,e,n,i,l){var s,o,a,r=null!=e?e:t.nullContext||{},c=t.hooks.helperMissing,d="function",u=t.escapeExpression,h=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]},p='\t\t\t\t\t\t\t\t\t<li data-momo-id="chromeTab" data-place="links" class="optional-link"><a\n\t\t\t\t\t\t\t\t\t\t\thref="'+u(typeof(o=null!=(o=h(n,"chromeNewTabUrl")||(null!=e?h(e,"chromeNewTabUrl"):e))?o:c)===d?o.call(r,{name:"chromeNewTabUrl",hash:{},data:l,loc:{start:{line:49,column:17},end:{line:49,column:36}}}):o)+'" data-analytics-id="browser tab" class="local">\n\t\t\t\t\t\t\t\t\t\t'+(null!=(s=(h(n,"browserIcon")||e&&h(e,"browserIcon")||c).call(r,"icon-favicon icon-svg",{name:"browserIcon",hash:{},data:l,loc:{start:{line:50,column:10},end:{line:50,column:52}}}))?s:"")+"\n\t\t\t\t\t\t\t\t\t\t"+u(typeof(o=null!=(o=h(n,"browserName")||(null!=e?h(e,"browserName"):e))?o:c)===d?o.call(r,{name:"browserName",hash:{},data:l,loc:{start:{line:51,column:10},end:{line:51,column:27}}}):o)+" Tab</a></li>\n";return o=null!=(o=h(n,"isChrome")||(null!=e?h(e,"isChrome"):e))?o:c,a={name:"isChrome",hash:{},fn:t.program(2,l,0),inverse:t.noop,data:l,loc:{start:{line:52,column:9},end:{line:59,column:22}}},s=typeof o===d?o.call(r,a):o,h(n,"isChrome")||(s=t.hooks.blockHelperMissing.call(e,s,a)),null!=s&&(p+=s),p},2:function(t,e,n,i,l){return'\t\t\t\t\t\t\t\t\t\t<li data-momo-id="apps" class="optional-link" data-place="links"><a href="chrome://apps" data-analytics-id="chrome apps" id="app-return" class="local">\n\t\t\t\t\t\t\t\t\t\t\t<svg class="icon-favicon icon-svg icon-apps" xmlns="http://www.w3.org/2000/svg"\n\t\t\t\t\t\t\t\t\t\t\t\t viewBox="0 0 32 32">\n\t\t\t\t\t\t\t\t\t\t\t\t<path d="M3 3h6v6H3V3zm10 0h6v6h-6V3zm10 0h6v6h-6V3zM3 13h6v6H3v-6zm10 0h6v6h-6v-6zm10 0h6v6h-6v-6zM3 23h6v6H3v-6zm10 0h6v6h-6v-6zm10 0h6v6h-6v-6z"></path>\n\t\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t\t\tApps</a></li>\n'},compiler:[8,">= 4.3.0"],main:function(t,e,n,i,l){var s,o,a,r=null!=e?e:t.nullContext||{},c=t.hooks.helperMissing,d="function",u=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]},h='<div class="app-dash">\n\t<div class="team-dash-links-wrapper" data-ob="links-dash">\n\t\t<ol class="team-dash-links add-shadow"></ol>\n\t\t<span class="more-links-wrapper">\n\t\t\t<span class="more-links">'+t.escapeExpression(typeof(o=null!=(o=u(n,"moreDropdownText")||(null!=e?u(e,"moreDropdownText"):e))?o:c)===d?o.call(r,{name:"moreDropdownText",hash:{},data:l,loc:{start:{line:5,column:28},end:{line:5,column:48}}}):o)+'</span>\n\t\t\t<i class="icon icon-angle-down"></i>\n\t\t</span>\n\t</div>\n</div>\n\n<div class="app-wrapper nipple nipple-top-left">\n\t<div class="app links-app">\n\t\t<header class="header app-header u--touch-only-flex">\n\t\t\t<div class="header-center">\n\t\t\t\t<div class="title-wrapper">\n\t\t\t\t\t<div class="title">Links</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class="header-right">\n\t\t\t\t<div class="mobile-add" title="Add New Link" data-test="links-add">\n\t\t\t\t\t<span class="icon-wrapper hide">\n\t\t\t\t\t\t<svg class="icon icon-plus" fill="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 448"><path xmlns="http://www.w3.org/2000/svg" d="m408 184h-136c-4.417969 0-8-3.582031-8-8v-136c0-22.089844-17.910156-40-40-40s-40 17.910156-40 40v136c0 4.417969-3.582031 8-8 8h-136c-22.089844 0-40 17.910156-40 40s17.910156 40 40 40h136c4.417969 0 8 3.582031 8 8v136c0 22.089844 17.910156 40 40 40s40-17.910156 40-40v-136c0-4.417969 3.582031-8 8-8h136c22.089844 0 40-17.910156 40-40s-17.910156-40-40-40zm0 0"></path></svg>\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t\t<div class="mobile-edit" title="Edit Links" data-test="links-edit">\n\t\t\t\t\t<span class="icon-wrapper hide">\n\t\t\t\t\t\t<svg class="icon icon-ellipsis" fill="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 60 60"><path d="M8 22c-4.411 0-8 3.589-8 8s3.589 8 8 8 8-3.589 8-8-3.589-8-8-8zM52 22c-4.411 0-8 3.589-8 8s3.589 8 8 8 8-3.589 8-8-3.589-8-8-8zM30 22c-4.411 0-8 3.589-8 8s3.589 8 8 8 8-3.589 8-8-3.589-8-8-8z"></path></svg>\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t\t<div class="mobile-close" title="Close Links" data-test="links-close">\n\t\t\t\t\t<span class="icon-wrapper u--mobile-show-bg hide">\n\t\t\t\t\t\t<svg class="icon icon-hide" fill="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 348.333 348.334"><path d="M336.559 68.611L231.016 174.165l105.543 105.549c15.699 15.705 15.699 41.145 0 56.85-7.844 7.844-18.128 11.769-28.407 11.769-10.296 0-20.581-3.919-28.419-11.769L174.167 231.003 68.609 336.563c-7.843 7.844-18.128 11.769-28.416 11.769-10.285 0-20.563-3.919-28.413-11.769-15.699-15.698-15.699-41.139 0-56.85l105.54-105.549L11.774 68.611c-15.699-15.699-15.699-41.145 0-56.844 15.696-15.687 41.127-15.687 56.829 0l105.563 105.554L279.721 11.767c15.705-15.687 41.139-15.687 56.832 0 15.705 15.699 15.705 41.145.006 56.844z"/></svg>\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</header>\n\n\t\t<div class="subviews-wrapper">\n\t\t\t<div class="subviews no-transition">\x3c!--\n\t\t\t--\x3e<div class="subview links-main">\n\t\t\t\t\t<div class="body">\n\t\t\t\t\t\t<div class="links-lists">\n\t\t\t\t\t\t\t<ol class="more-links-list pinned-links-list links-list"></ol>\n\t\t\t\t\t\t\t<hr class="pinned-divider">\n\t\t\t\t\t\t\t<ol class="more-links-list links-list">\n';return o=null!=(o=u(n,"isChromium")||(null!=e?u(e,"isChromium"):e))?o:c,a={name:"isChromium",hash:{},fn:t.program(1,l,0),inverse:t.noop,data:l,loc:{start:{line:47,column:8},end:{line:60,column:23}}},s=typeof o===d?o.call(r,a):o,u(n,"isChromium")||(s=t.hooks.blockHelperMissing.call(e,s,a)),null!=s&&(h+=s),h+'\t\t\t\t\t\t\t</ol>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="add-error-message message">Connection required to add link. <span\n\t\t\t\t\t\t\t\tclass="message-action retry-add">Retry</span></div>\n\t\t\t\t\t\t<div class="message-empty"><i class="loading-icon"></i>Loading...</div>\n\t\t\t\t\t\t<div class="empty">\n\t\t\t\t\t\t\t<div class="title">No links yet</div>\n\t\t\t\t\t\t\t<div class="description">Add your favorite links</div>\n\t\t\t\t\t\t\t<span class="button new-toggle empty-toggle">New Link</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="footer-input">\n\t\t\t\t\t\t\t<span class="new-toggle"><span class="icon icon-favicon icon-plus"></span> New Link</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\x3c!--\n\n\t\t\t--\x3e'+(null!=(s=t.invokePartial(u(n,"lookup").call(r,e,"addGroup",{name:"lookup",hash:{},data:l,loc:{start:{line:77,column:10},end:{line:77,column:31}}}),e,{data:l,helpers:n,partials:i,decorators:t.decorators}))?s:"")+'\n\n\t\t\t</div>\x3c!--\n\t --\x3e</div>\n\t</div>\n\t<div class="touch-overlay"></div>\n</div>\n'},usePartial:!0,useData:!0},k=Object.assign({"../collections/Quicklinks.js":t=>{t.collect.Quicklinks=m.collect.SyncedCollection.extend({LinkType:o,initialize:function(e,n){(n=n||{}).name=n.name||"quicklinks",n.model=n.model||t.models.Quicklink,n.localProps=["unsyncable","order"],n.transientProps=["draftDeleted"],n.apiUrl=h+"links",m.collect.SyncedCollection.prototype.initialize.call(this,e,n),this.listenTo(this,"reorder",this.reorderItem),this.listenTo(this,"reset",this.removeDrafts)},saveOptions:{patch:!0},comparator:"order",isValidModel:function(t){return!(t.get("type")!==this.LinkType.Link&&!t.get("title"))},removeDrafts:function(){this.resetOnce||(this.resetOnce=!0,this.models.map((function(t){t.get("draft")&&t.destroy({silent:!0})})))},reorderItem:function(t){let e,n,i=this.findWhere({id:t.moveId})||this.findWhere({csid:t.moveId}),l=this.findWhere({id:t.moveTargetId})||this.findWhere({csid:t.moveTargetId});if(!i||!l)return;n=i.get("parentLinkId"),e=n?this.findWhere({id:n})||this.findWhere({csid:n}):this.getRootLink();let s=e.get("linksOrder").slice(0),o=Math.max(s.indexOf(i.get("id")),s.indexOf(i.get("csid")));s.splice(o,1);let a=Math.max(s.indexOf(l.get("id")),s.indexOf(l.get("csid")));s.splice(a+t.moveOffset,0,t.moveId),e.save({linksOrder:s})},confirmCreate:function(t){if(!t.sublinks)return;t.save("draft",!1),t.sublinks.map((function(t){t.get("draft")&&!t.get("deleted")&&t.save({draft:!1})}));let e=this.getRootLink(),n=e.get("linksOrder").slice(0);n.push(t.get("id")||t.get("csid")),e.save({linksOrder:n})},getHierarchy:function(){let t,e=[],n=this;this.where({type:this.LinkType.LinkGroup,deleted:!1}).map((function(i){i.get("isRoot")||(i.sublinks=n.where({deleted:!1,parentLinkId:i.get("id")||i.get("csid")}),t=i.get("linksOrder")||[],i.sublinks.map((function(e){e.set({order:Math.max(t.indexOf(e.get("id")),t.indexOf(e.get("csid")),0)})})),i.sublinks.sort(o),e.push(i))})),e=e.concat(this.where({type:this.LinkType.Legacy,deleted:!1}));let i=this.findWhere({isRoot:!0}),l=this.findWhere({isTeamRoot:!0});return s(i,1e3,(function(t){return!t.isTeamLink()})),s(l,0,(function(t){return t.isTeamLink()})),e.sort(o),e;function s(n,i,l){n&&(t=n.get("linksOrder")||[],e.map((function(e){if(l&&!l(e))return;let n=t.indexOf(e.get("id"));n<0&&(n=t.indexOf(e.get("csid"))),n<0&&e.get("id")&&(t.push(e.get("id")),n=t.length-1),e.set({order:i+n})})))}function o(t,e){return t.get("order")+(t.get("pinned")?0:1e5)-(e.get("order")+(e.get("pinned")?0:1e5))}},getRootLink:function(){let t=this.findWhere({isRoot:!0});if(!t&&this.offlineOnly){t={isRoot:!0,linksOrder:[],type:this.LinkType.LinkGroup},this.getHierarchy().map((function(e){t.linksOrder.push(e.get("id")||e.get("csid"))})),this.create(t),t=this.findWhere({isRoot:!0})}return t},handleOrdering:function(t){let e=[],n=this.serverIdAttribute;t.map((function(t){t.root&&(e=t.linksOrder)})),this.models.map((function(t){let i=e.indexOf(t.get(n));i>=0&&t.save({order:i},{ignoreRender:!0,silent:!0})}))}})},"../models/Quicklink.js":t=>{t.models.Quicklink=Backbone.Model.extend({idAttribute:"csid",defaults:function(){return{url:"",local:!1,order:0,type:0,deleted:!1,draft:!1,summaryText:""}},initialize:function(){this.idAttribute=this.collection&&this.collection.idAttribute||"csid",this.serverIdAttribute=this.collection&&this.collection.serverIdAttribute||"id"},saveHandler:function(t){if(this.sublinks)this.sublinks.map((function(e){e.save({parentLinkId:t.id,unsyncable:!1})}));else{let e=this.collection.findWhere({id:this.get("parentLinkId")});if(e){let n=e.get("linksOrder").slice(0),i=n.indexOf(this.get("csid"));i>=0&&(n.splice(i,1,t.id),e.save({linksOrder:n}))}}},mainContent:function(){let t={};return t.title=this.get("title"),t.url=this.get("url"),t},getFriendlyUrl:function(){let t=this.get("url");return t.substr(Math.max(t.indexOf("://")+3,0))},saveOptions:function(){return this.collection&&this.collection.saveOptions},getActiveSublinks:function(){let t=[];return this.sublinks?(this.sublinks.map((function(e){e.get("deleted")||t.push(e)})),t):t},delete:function(){this.group&&this.group.removeChild(this),this.save("deleted",!0)},removeChild:function(t){this.sublinks.splice(this.sublinks.indexOf(t),1)},isTeamLink:function(){let t=this.get("id");return t&&"T"===t[0]},comparator:"order"})},"../views/Quicklink.js":t=>{t.views.Quicklink=Backbone.View.extend({tagName:"li",template:t.templates["quicklinks-item-template"],analytics:new m.Analytics({feature:"links"}),events:{"keypress .todo-input":"updateOnEnter","click .destroy":"delete","click .draft-destroy":"draftDelete",dragstart:"dragstart",dragenter:"dragenter","click a":"handleClick","click .more":"toggleDropdown","click .detail":"showDetail","click .link-pin":"togglePin"},initialize:function(t){this.dropdownOpen=!1,_.bindAll(this,"dragstart","dragenter"),this.parent=t.parent,this.noIcon=t.noIcon,this.listenTo(this.model,"change",this.onChange),this.listenTo(this.model,"change:archive destroy",this.remove),this.listenTo(m,"globalEvent:click globalEvent:esc globalEvent:closeDropdowns",this.hideDropdown)},onChange:function(){this.model.get("deleted")?this.destroy():this.render()},render:function(){let t=this,e=this.model.sublinks,n=this.model.get("url")||e&&1===e.length&&e[0].get("url");this.moreIsSet=!1;const i=n&&m.utils.getFaviconUrl(n);if(this.noIcon)this.loadLink(!1);else{let e=new Image;this.loadLink(!1),e.src=i,e.onload=function(){t.loadLink(i)}}return t},hideDropdown:function(t){this.keepOpen?this.keepOpen=!1:!this.dropdownOpen||t&&$.contains(this.$el[0],t.target)||this.toggleDropdown()},showDetail:function(t){t.stopPropagation(),this.toggleDropdown(t),this.parent.showDetail(this.model,t)},toggleDropdown:function(t){t&&t.stopPropagation(),this.dropdownOpen=!this.dropdownOpen,this.dropdownOpen&&(this.keepOpen=!0,m.trigger("globalEvent:closeDropdowns"));let e=t&&$(t.delegatedTarget).closest("li")||this.$el;e.toggleClass("active",this.dropdownOpen),e.find(".more").toggleClass("active",this.dropdownOpen);let n=this.$el.find(".dropdown");if(0===n.length)return;let i=n.closest(".links-list");if(this.dropdownOpen){this.model.get("pinned")&&this.parent.isOpen&&this.parent.forceHidePopup(!0);let t=n[0].getBoundingClientRect().bottom;if(i.height()<n.height()+10&&i.css({height:n.height()+10}),0===i.length&&(i=n.closest(".more-links-list")),0===i.length)return;let e=i[0].getBoundingClientRect().bottom-t-5,l=n.css("margin-top");l=Number.parseFloat(l.substring(0,l.length-2)),this.baseMargin||(this.baseMargin=l);let s=e<0?l+e:l;n.css({"margin-top":s}),8!==s?n.css({right:"calc(100% + 5px)"}):n.css({right:"calc(var(--app-padding)"})}else i.css({height:"auto"}),n.css({"margin-top":this.baseMargin})},loadLink:function(t){let e=this.model.get("title")||this.model.getFriendlyUrl(),n=this.model.sublinks,i=this.model.get("url")||n&&1===n.length&&n[0].get("url"),l=this.model.get("local"),s=this.model.get("readOnly"),o=!!this.model.get("pinned"),a={showControls:this.parent.showPinnedInPopup||!this.model.get("isTeam"),title:e,iconLabel:e[0],draggable:!this.model.isTeamLink(),url:i,showPinOption:!!this.parent.team,noMenu:!!this.model.get("parentLinkId")||!this.parent.team&&!this.model.sublinks,noIcon:this.noIcon,hasUrls:this.model.sublinks&&this.model.sublinks.length>1,isGroup:this.model.get("type")===this.parent.LinkType.LinkGroup,local:l,readOnly:s,favicon_url:t,pinned:o,ellipsisIconClass:o?"dash-icon":"",pinnedClass:o?"active":"",team:this.parent.team,summaryText:this.getSummaryText(),editing:this.model.get("type")===this.parent.LinkType.Link&&this.parent.activeModel&&!this.parent.activeModel.get("draft")};this.$el.html(this.template(a)),this.model.isTeamLink()||this.$el.attr("draggable","true")},getSummaryText:function(){let t=this.model.sublinks,e=this.model.get("type");return e===o.LinkGroup&&t?1===t.length?t[0].get("url"):t.map((function(t){try{let e=new URL(t.get("url"));return e&&e.host}catch(e){return console.warn(e),""}})).filter((function(t){return t})).join(", "):e===o.LINK?this.model.get("url"):""},destroy:function(){this.remove(),this.unbind()},delete:function(t){t.stopPropagation(),this.toggleDropdown();let e=this.getModelType(this.model);this.analytics.capture(e+" delete",{is_paid_event:"tab group"===e}),this.model.delete()},draftDelete:function(t){t.stopPropagation(),this.model.set({draftDeleted:!0},{silent:!0}),this.$el.remove();let e=this.parent.$el.find(".new-group-url");this.parent.activeModel.sublinks.length&&!this.parent.activeModel.sublinks.every((function(t){return t.get("draftDeleted")}))||e.addClass("active"),e.trigger("focus")},dragstart:function(t){if(m.trigger("globalEvent:closeDropdowns"),this.dropdownOpen&&this.toggleDropdown(),this.model.isTeamLink())return t.originalEvent.dataTransfer.effectAllowed="none",void t.stopPropagation();t.originalEvent.dataTransfer.effectAllowed="move",t.originalEvent.dataTransfer.setData("text","dummy"),this.parent.handleDragStart(this)},dragenter:function(t){if(this.model.isTeamLink())t.stopPropagation();else if("quicklink"===this.parent.dragmode){let t=this.model.collection;this.parent.dragging.$el.hide(),this.parent.$placeholder||this.parent.addPlaceholder();let e=t.serverIdAttribute,n=t.idAttribute,i=t.offlineOnly?n:e,l=this.model.get(i)||this.model.get(n);this.parent.li_index(this.parent.$placeholder)<this.parent.li_index(this.$el)?(this.$el.after(this.parent.$placeholder),this.parent.moveTargetId=l,this.parent.moveOffset=1):(this.$el.before(this.parent.$placeholder),this.parent.moveTargetId=l,this.parent.moveOffset=0);let s=this.parent.$placeholder;this.parent.$placeholder.css("display","list-item"),s.after(this.parent.dragging.$el)}},handleClick:function(t){t.stopPropagation(),t.preventDefault();let e=m.utils.isTouchDevice(),n=this,i=this.getModelType(this.model),l=this.model.sublinks,s=m.utils.getBrowser();if(m.Analytics.batchCapture(i+" click",{is_paid_event:"tab group"===i}),l){if(1===l.length)return void o(l[0].get("url"),t);n.$el.addClass("opening"),setTimeout((function(){n.$el.removeClass("opening")}),1e3),s?t.metaKey?s.windows.create({focused:!0,url:l.map((function(t){return t.get("url")}))}):l.forEach((function(t,n){t.get("deleted")||(e&&0===n?setTimeout((function(){m.utils.getBrowser().tabs.update({url:t.get("url")})}),0):s.tabs.create({url:t.get("url"),active:!1}))})):l.forEach((function(t){window.open(t.get("url"))}))}else o(this.model.get("url"),t);function o(t,i){let l=m.utils.getBrowser(),s=!e&&(m.models.bookmarksSettings.get("openInNewTab")||i.metaKey||n.model.get("type")===n.parent.LinkType.Link);l?s?m.utils.getBrowser().tabs.create({url:t,active:!1}):m.utils.getBrowser().tabs.update({url:t}):s?(window.open(t),window.focus()):window.location=t}},togglePin:function(t){t.stopPropagation(),this.model.save("pinned",!this.model.get("pinned")),this.toggleDropdown(),this.model.collection.trigger("refresh"),this.parent.setAppPosition()},updateOnEnter:function(t){13===t.keyCode&&this.close($(t.delegatedTarget).data("field"))},getModelType:t=>t.sublinks&&t.sublinks.length>1?"tab group":"link"})},"../views/Quicklinks.js":n=>{n.views.Quicklinks=Backbone.View.extend({attributes:{id:"quicklinks",class:"quicklinks"},offline:!0,initialFetchStarted:!1,analytics:new m.Analytics({feature:"links"}),template:n.templates.quicklinks,renderedOnce:!1,events:{"click a":"handleClick","blur .new-group-title":"saveTitle","keyup .new-group-title":"handleNameKeyUp","keyup .new-group-url":"saveUrl","click .add-tab":"saveUrlByClick","click .back":"handleBack","click .new-toggle":"showAddGroup","click .delete":"deleteGroup","click .new-group-toggle":"showAddGroup","click .save-link":"saveLink","click .header .more-toggle":"toggleDropdown","click .create":"confirmCreate","click .update":"confirmUpdate","click .mobile-close":"hidePopup","click .mobile-edit":"toggleLinkEllipsis","click .mobile-add":"showAddGroup",dragover:"dragover",dragend:"dragend",drop:"drop"},LinkType:o,initialize:function(){this.DropdownTitles={EMPTY_STATE:"Add Link",NO_PINNED:"Links",HAS_PINNED:"Links"},this.showPinnedInPopup=Math.min(m.reactive.windowDimensions.width,m.reactive.windowDimensions.height)<=450,this.subViews=[],_.bindAll(this,"addOne","addAll","dragover","dragend","li_index"),this.isPlusUser=m.conditionalFeatures.featureEnabled("plus"),this.name=this.options.name,this.metadata=this.options.metadata,this.attributes.id=this.options.id,this.listenTo(m,"globalEvent:esc",this.hidePopup),this.listenTo(this.collection,"remove",this.checkOptionalLinks),this.listenTo(this.collection,"change",this.handleDelete),this.listenTo(this.collection,"add",this.added),this.listenTo(this.collection,"reset refresh",this.collectionReset),this.listenTo(this.collection,"error",this.collectionError),this.listenTo(m.models.bookmarksSettings,"change:appsLocation",this.checkOptionalLinks),this.listenTo(m.models.bookmarksSettings,"change:chromeTabLocation",this.checkOptionalLinks),this.listenTo(m,"destroyWidget:quicklinks",this.destroy)},deleteGroup:function(){this.activeModel&&this.activeModel.delete(),this.showMain(),this.toggleDropdown()},handleDelete:function(t){if(t&&this.activeModel&&t.get("parentLinkId")===this.activeModel.id&&(t.changed.deleted||t.get("deleted"))){this.clearUrl();let t=this.$el.find(".new-group-url");t.addClass("active"),t.focus()}t&&t.changed.deleted&&this.checkOptionalLinks()},toggleDropdown:function(t){let e;t?(e=$(t.delegatedTarget).parent(),e.toggleClass("active",!this.dropdownOpen)):e=this.$el,e.find(".more").toggleClass("active",!this.dropdownOpen),this.dropdownOpen=!this.dropdownOpen},checkOptionalLinks:function(){let t=this;this.$el.find(".optional-link").each((function(e,n){t.checkInclusion(n)})),this.updateFirstLink(),this.toggleEmptyState(this.checkEmpty())},updateFirstLink:function(){this.$el.find("li").removeClass("first-link"),this.$el.find(".optional-link.show").first().addClass("first-link"),0===this.$el.find(".first-link").length&&this.$el.find(".links-app li").not(".optional-link").first().addClass("first-link")},checkEmpty:function(){let t=this;return!this.$el.find(".optional-link.show").length&&(0===this.collection.size()||this.collection.every((function(e){return e.get("isRoot")||e.get("deleted")||e.get("draft")||e.get("type")===t.LinkType.Link})))},checkLinksInMoreDropdown:function(){return this.collection.some((function(t){return!t.get("parentLinkId")&&!t.get("pinned")&&!t.get("deleted")}))},toggleEmptyState:function(t){if(!this.collection.everLoaded())return;this.$el.toggleClass("is-empty",t),this.$el.find(".links-lists").mToggle("block",!t),this.$el.find(".links-lists").toggleClass("is-empty-has-pinned",""===this.$el.find(".links-list").val()&&this.hasPinned()),this.$el.find(".footer-input").mToggle("flex",!t);let e=this.getLinkDropdownText();this.$moreLinksDropdownIcon.mToggle("unset",e===this.DropdownTitles.HAS_PINNED),this.$moreLinksButton.text(e),this.$el.toggleClass("no-pinned",!this.hasPinned()),this.$el.closest(".top-left").toggleClass("links-empty",t)},checkInclusion:function(t){let e=m.models.bookmarksSettings,n=$(t);n.toggleClass("show",e.get(n.attr("data-momo-id")+"Location")===n.attr("data-place"))},addPlaceholder:function(){"second"===this.currentSubview?this.$placeholder=$("<li><a>&nbsp;</a></li>").addClass("placeholder"):this.$placeholder=$('<li><div class="link-wrapper"><a>&nbsp;</a></li>').addClass("placeholder"),this.$placeholder.appendTo(this.$el)},removePlaceholder:function(){this.$placeholder&&(this.$placeholder.remove(),this.$placeholder=void 0)},getLinkDropdownText:function(){return this.checkEmpty()?this.DropdownTitles.EMPTY_STATE:this.hasPinned()?this.DropdownTitles.HAS_PINNED:this.DropdownTitles.NO_PINNED},hasPinned:function(){return this.collection.some((function(t){return!t.get("parentLinkId")&&t.get("pinned")}))},render:function(){if(!this.renderedOnce){let e=this.getLinkDropdownText(),i={isPlus:this.isPlusUser,isChrome:t(),moreDropdownText:e,addGroup:n.templates["add-group"]};this.$el.html(this.template(i)),this.$baseLinks=this.$(".team-dash-links").first(),this.$popupPinnedLinks=this.$(".pinned-links-list"),this.$subviews=this.$(".subviews"),this.$otherLinks=this.$el.find(".links-main ol").not(".pinned-links-list"),this.$moreLinksButton=this.$(".more-links"),this.$moreLinksDropdownIcon=this.$(".more-links-wrapper .icon"),this.renderedOnce=!0}return this.$el.toggleClass("no-extra",!this.checkLinksInMoreDropdown()),this.$el.toggleClass("no-pinned",!this.hasPinned()),m.reactive.appsReady&&this.$el.find(".subviews").removeClass("no-transition"),this},destroy:function(){this.remove(),this.unbind()},doFetch:function(){this.initialFetchStarted=!0,this.collection.fetch({reset:!0})},doFetchIfNeeded:function(){this.initialFetchStarted||this.doFetch()},switchTo:function(t){let e=this;switch(this.switching=this.isOpen&&this.currentSubview!==t,this.switching&&(this.$el.addClass("disable-smooth-height"),this.$subviews.css("height",Math.min(this.$subviews[0].clientHeight,this.heightLimit)),this.$el.addClass("hide-scroll")),this.$subviews.removeClass("first second").addClass(t),this.currentSubview=t,t){case"first":this.activeViewElement=this.$subviews.children()[0];break;case"second":this.activeViewElement=this.$subviews.children()[1]}this.switching&&(this.$subviews.css("height",Math.min(this.activeViewElement.scrollHeight,this.heightLimit)),setTimeout((function(){e.switching=!1,e.$subviews.css("height",""),e.$el.removeClass("hide-scroll disable-smooth-height")}),300))},addUrl:function(t){let e=new n.views.Quicklink({model:t,parent:this,noIcon:!0,draft:!0});this.$el.find(".urls").append(e.render().$el)},handleBack:function(t){t&&(t.preventDefault(),t.stopPropagation()),this.showMain()},showMain:function(t){t&&(t.preventDefault(),t.stopPropagation()),this.dropdownOpen&&this.toggleDropdown(),this.switchTo("first")},clearUrl:function(){this.$el.find(".new-url").val("")},clearAdd:function(){this.$el.find(".new-title").val(""),this.$el.find(".links-add .urls").html(""),this.clearUrl()},showAddGroup:function(){this.activeModel=null,this.$el.find(".new-group-url").addClass("active"),this.clearAdd(),this.$el.find(".links-add").removeClass("editing");let t=this;return this.switchTo("second"),setTimeout((function(){t.$el.find(".new-group-title").trigger("focus")}),300),!0},collectionReset:function(){this.addAll()},added:function(t){t.get("type")===this.LinkType.Link||t.get("draft")||t.get("isRoot")||(this.addOne(t),this.checkOptionalLinks())},addOne:function(t){if(t.get("draft")&&t.get("type")===this.LinkType.LinkGroup)return;const e=this.showPinnedInPopup&&t.get("pinned")?this.$popupPinnedLinks:this.$otherLinks;let i=new n.views.Quicklink({model:t,parent:this,noIcon:e===this.$baseLinks});this.subViews.push(i),e.append(i.render().$el)},addAll:function(){this.offline=!1,_.each(this.subViews,(function(t){t&&t.destroy&&t.destroy()})),this.subViews=[];let t=this,e=this.collection.getHierarchy(),n=0;e.map((function(t){if(!t.get("title"))return;let e=t.get("title").length;e>n&&(n=e)}));let i=n<22?"":n<29?"wide":n<35?"wider":"widest";this.$el.addClass(i),e.map((function(e){t.addOne(e)})),this.hasPinned()||this.$el.addClass("no-pinned"),this.checkOptionalLinks(),this.loadTriggered||(m.trigger(this.metadata.id+":loadedComplete"),this.loadTriggered=!0),this.$el.find(".loading-message").mToggle("block",!this.collection.everLoaded()),this.$el.find(".app").first().css("height","auto")},confirmCreate:function(){let t=this.$el.find(".new-group-title").val().trim();if(!t||0===t.length)return void this.pulse(".new-group-title");let e=this.$el.find(".new-group-url").val();this.validateAndEnsureUrlScheme(e)?(e&&e.length&&this.saveUrl(),this.activeModel&&0!==this.activeModel.sublinks.length?(this.collection.confirmCreate(this.activeModel),this.addAll(),this.showMain(),this.analytics.capture(this.getModelType(this.activeModel)+" add",{is_paid_event:"tab group"===this.getModelType(this.activeModel)})):this.pulse(".new-group-url")):this.pulse(".new-group-url")},confirmUpdate:function(){let t=this.$el.find(".new-group-url").val();0===t.length&&this.activeModel.sublinks.every((function(t){return t.get("draftDeleted")}))||!this.validateAndEnsureUrlScheme(t)?this.pulse(".new-group-url"):(t&&t.length&&this.saveUrl(),this.activeModel.sublinks.slice(0).map((function(t){t.get("draftDeleted")?t.delete():t.get("draft")&&t.save("draft",!1)})),this.addAll(),this.showMain(),this.analytics.capture(this.getModelType(this.activeModel)+" edit",{is_paid_event:"tab group"===this.getModelType(this.activeModel)}))},handleNameKeyUp:function(t){if(t&&27===t.keyCode)return t.stopPropagation(),this.escPressed=!0,void $(t.delegatedTarget).trigger("blur");t&&13!==t.keyCode||(this.saveTitle(t),$(t.delegatedTarget).trigger("blur"))},saveTitle:function(t){if(this.escPressed)return void(this.escPressed=!1);let e=this.$el.find(".new-group-title").val();if(e&&(e=e.trim()),!e||0===e.length)return;t.stopPropagation(),t.preventDefault();let n=this.activeModel,i=this.$(".new-group-url"),l=i.val();n?n.save("title",e):l&&0!==l.length&&this.isPlusUser?this.saveLinkGroup(t):i.trigger("focus")},saveUrlByClick:function(t){t.stopPropagation();let e=this.$el.find(".new-group-url");this.isPlusUser?e.is(":visible")?this.saveUrl():(e.addClass("active"),e.trigger("focus")):a(r.TAB_GROUPS,"dash")},saveUrl:function(t){if(t&&27===t.keyCode)return t.stopPropagation(),void $(t.delegatedTarget).trigger("blur");if(t&&13!==t.keyCode)return;let e=this.activeModel;if(!e)return void this.saveLinkGroup(t);let n=this.$el.find(".new-group-url"),i=n.val(),l=this;0!==i.length&&this.validateAndEnsureUrlScheme(i)?(this.collection.create(l.createUrl(i,this.activeModel),{success:function(t){e.sublinks.push(t),e.get("linksOrder").push(t.get("id")||t.get("csid")),t.group=e,l.addUrl(t)}}),this.clearUrl(),n.focus(),this.$el.find(".urls li").filter(":visible").length&&!this.isPlusUser&&n.removeClass("active")):this.pulse(".new-group-url")},createUrl:function(t,e){let n,i=0;return e&&e.sublinks&&e.sublinks.length>0&&(n=e.sublinks[e.sublinks.length-1]),n&&(i=n.get("order")+10),{title:null,url:m.utils.ensureUrlScheme(t),local:/^chrome|chrome-extension|chrome-search:\/\//i.test(t),csid:m.utils.uuidv4(),parentLinkId:e?e.get("id")||e.get("csid"):null,unsyncable:!!e&&!e.get("id"),position:e&&e.sublinks?e.sublinks.length-1:0,type:e?this.LinkType.Link:this.LinkType.LinkGroup,order:i,draft:!0}},saveLinkGroup:function(t){t&&t.preventDefault&&(t.stopImmediatePropagation(),t.preventDefault()),this.activeModel=null;let e=this.$el.find(".new-group-url"),n=this.$el.find(".new-group-title").val();n&&(n=n.trim());let i=e.val(),l=this;if(0===i.length||!this.validateAndEnsureUrlScheme(i))return void this.pulse(".new-group-url");let s=0;if(this.collection.length>0){s=this.collection.max((function(t){return t.get("order")})).get("order")+100}this.collection.create({title:n,linksOrder:[],order:s,type:this.LinkType.LinkGroup,draft:!0},{success:function(n){n?(l.activeModel=n,l.collection.create(l.createUrl(i,n),{success:function(i){n.sublinks=[i],n.group=n,l.addUrl(i),n.get("linksOrder").push(i.get("id")||i.get("csid")),l.clearUrl(),1===n.getActiveSublinks().length&&t&&"keyup"===t.type?e.removeClass("active"):e.focus()}})):l.pulse(".new-group-url")}})},pulse:function(t){let e=this;this.$el.find(t).trigger("focus"),this.$el.find(t).addClass("pulse"),_.delay((function(){e.$el.find(t).removeClass("pulse")}),1e3)},showDetail:function(t,e){if(e&&!this.isOpen){$(e.delegatedTarget).closest("li").addClass("active");let t=this.$el.find(".subviews");t.addClass("no-transition"),setTimeout((function(){t.removeClass("no-transition")}),10),this.showPopup(!0)}this.activeModel=t;let n=this;this.clearAdd();let i=this.$el.find(".links-add .new-group-title");i.val(t.get("title")),t.getActiveSublinks().map((function(t){n.addUrl(t)})),this.$el.find(".links-add").addClass("editing"),this.$el.find(".new-group-url").removeClass("active"),this.switchTo("second"),setTimeout((function(){i.trigger("focus")}),300)},handleDragStart:function(t){this.dragmode="quicklink",this.dragging=t,this.updateFirstLink()},dragover:function(t){return t.preventDefault(),t.stopPropagation(),t.originalEvent.dataTransfer.dropEffect="move",this.updateFirstLink(),!1},drop:function(t){t.preventDefault(),t.stopPropagation(),this.checkOptionalLinks()},dragend:function(t){if(t.originalEvent.dataTransfer.dropEffect="move",t.preventDefault(),t.stopPropagation(),"quicklink"===this.dragmode){let e=this.dragging.model,n=t.target.closest("ol").classList.contains("more-links-list")&&e.get("pinned"),i=t.target.closest("ol").classList.contains("team-dash-links")&&!e.get("pinned");(i||n)&&e.save("pinned",i),this.dragging.$el.css("display","list-item"),this.removePlaceholder();let l=e.collection.serverIdAttribute,s=e.collection.idAttribute,o=this.collection.offlineOnly?s:l;this.collection.trigger("reorder",{moveId:e.get(o)||e.get(s),moveTargetId:this.moveTargetId,moveOffset:this.moveOffset,inEdit:$(t.target).closest(".links-add").length>0})}return this.checkOptionalLinks(),!1},showPopup:function(){this.$el.addClass("active"),this.isOpen=!0},hidePopup:function(){this.$el.removeClass("active"),this.isOpen=!1,this.toggleLinkEllipsis(null,!0),c.$emit("links:close")},handleClick:function(t){t.stopPropagation(),t.preventDefault();let n=t.delegatedTarget.href;const i=t.delegatedTarget.getAttribute("data-analytics-id");i&&this.analytics.capture(i+" click"),m.models.bookmarksSettings.get("openInNewTab")||t.metaKey?e().tabs.create({url:n,active:!1}):e().tabs.update({url:n})},li_index:function(t){return this.$("li").index(t)},toggleLinkEllipsis:function(t,e){m.utils.isTouchDevice()&&(e?this.$el.find(".links-list").removeClass("show-more"):this.$el.find(".links-list").toggleClass("show-more"))},validateAndEnsureUrlScheme:t=>!t||m.utils.isValidUrl(m.utils.ensureUrlScheme(t)),getModelType:t=>t.sublinks&&t.sublinks.length>1?"tab group":"link"})}}),w=Object.assign({"../templates/add-group.hbs":p,"../templates/quicklinks-item-template.hbs":g,"../templates/quicklinks.hbs":f,"../templates/teamlinks.hbs":v});let b=null;const y={addin:"92072aeb-a328-4ca7-b28e-98ced2ce0cd0",id:"quicklinks"},L=async()=>{if(b)return await b;b=new Promise((t=>d(y,k,w,(e=>{function n(t){m.models.customization.get("linksVisible")&&(m.views.quicklinks=new e.views.Quicklinks({collection:t,region:"top-left",order:"prepend",name:"Links",team:!1,id:"quicklinks",metadata:y}),m.stopListening(m.models.customization,"change:linksVisible"))}e.styles.style(),m.conditionalFeatures.checkFeatureAndMigrateData("serverlinks","linksVisible","momentum-quicklinks",(function(){n(new e.collect.Quicklinks(null,{model:e.models.Quicklink})),t()}),(function(){!function(){const t=localStorage.getItem("momentum-quicklinks");if(!t)return;localStorage.setItem("quicklinks",t);const e=Object.keys(localStorage);for(let n=0;n<e.length;n++){const t=e[n];if(0===t.indexOf("momentum-quicklinks")&&t.length>20){const e=JSON.parse(localStorage.getItem(t));e.csid||(e.csid=e.id,delete e.id),localStorage.setItem("quicklinks-"+e.csid,JSON.stringify(e)),localStorage.removeItem(t)}}localStorage.removeItem("momentum-quicklinks")}(),n(new e.collect.Quicklinks(null,{model:e.models.Quicklink,offlineOnly:!0})),t()}),(function(t){m.listenTo(m.models.customization,"change:linksVisible",t)})),m.once("destroyWidget:quicklinks",(()=>{m.views.quicklinks.destroy()}))}))))};const T=u(n({name:"QuicklinksApp",components:{AppPopup:l},setup:()=>({viewStateStore:s(),quicklinksAddin:i()}),async mounted(){this.quicklinksAddin&&(await L(),$(this.quicklinksAddin).append(m.views.quicklinks.render().$el),m.views.quicklinks.showMain(),m.views.quicklinks.showPopup(),m.views.quicklinks.doFetchIfNeeded(),m.widgetManager.appReady("quicklinks"))},destroyed(){m.views.quicklinks.hidePopup()}}),(function(){var t=this,e=t._self._c;return t._self._setupProxy,e("app-popup",{attrs:{position:"bottom-right",region:"top-left","data-test":"quicklinks-app",width:250,focused:t.viewStateStore.focused},on:{close:function(e){return t.viewStateStore.togglePopup(!1)}},nativeOn:{click:function(e){return t.viewStateStore.focus()}}},[e("div",{ref:"quicklinksAddin",staticClass:"quicklinks-addin"})])}),[],!1,null,"6648be66").exports;export{T as default};
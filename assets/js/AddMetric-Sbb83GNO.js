const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/js/FocusModeInsightsApp-CgAiIVqy.js","assets/js/index-DY0DW88M.js","assets/js/Logger-CErMjlBd.js","assets/js/style-cpFB66wV.js","assets/css/style-CrTXrpPu.css","assets/js/AppPopup-whOF9ytj.js","assets/js/ResizeSensor-ZXOsDHeC.js","assets/js/globalKeyEventManager-Dw4DvSNm.js","assets/js/_plugin-vue2_normalizer-DeUNqxFl.js","assets/css/AppPopup-BXpiIkq_.css","assets/js/AppViewSwitchDynamic-Dtsc-8t8.js","assets/js/SmoothReflow-Cnw3bIxd.js","assets/js/useAllComponentsMounted-RTvHVD2I.js","assets/js/DataSyncService-BnTv72BN.js","assets/css/SmoothReflow-C80bIkgz.css","assets/js/appViewSwitchMixin-BsLJ76Hr.js","assets/css/AppViewSwitchDynamic-BvKRKS9r.css","assets/js/BaseDropdown-CJtlJqHX.js","assets/js/BaseDropdownContent-Nf5O_5Ty.js","assets/js/constants-CALDQiUE.js","assets/js/index-CV0q_XsJ.js","assets/css/BaseDropdownContent-BVfvvT0B.css","assets/js/portal-vue.esm-BDTnR1AQ.js","assets/js/icon-ellipsis-D7nTOXaQ.js","assets/css/BaseDropdown-CwtM7hMN.css","assets/js/AppView-Du2InOAV.js","assets/css/AppView-CsYj23U-.css","assets/js/AppHeader-DINik7Wl.js","assets/js/AppHeaderControl-CYSrwe76.js","assets/css/AppHeaderControl-B2WuFnb1.css","assets/js/constants-KuzCZNtH.js","assets/js/icon-close-DRlspKs3.js","assets/css/AppHeader-CM5L_Lkb.css","assets/js/BaseIcon-Bb2ZVMd4.js","assets/js/dynamic-import-helper-DIl3ayLm.js","assets/css/BaseIcon-Bkqy2Cka.css","assets/js/BaseDropdownOption-Bn6J2nm1.js","assets/css/BaseDropdownOption-DaYMTb1b.css","assets/js/focusModeInsightsViewState-CgeWEHYD.js","assets/js/ViewState-DzCxxm0h.js","assets/js/appZStack-B9FmF8l5.js","assets/js/OverflowCarousel-BTLDelkQ.js","assets/js/constants-BpVlFj04.js","assets/js/icon-next-CI-_n-sg.js","assets/css/OverflowCarousel-eEMC8kQU.css","assets/js/reactiveCustomization-B8WwDagp.js","assets/js/pomodoroCompleted-Cm_ahB75.js","assets/js/persistStore-CE5fTtZd.js","assets/js/state-odjm2uKU.js","assets/js/LocalStorageStoreSyncedItem-kVGQtJA7.js","assets/js/PomodoroTimers-CqOVDo7T.js","assets/js/promisifiedChrome-B6V9WMyE.js","assets/js/login-ByohQG_J.js","assets/js/authService-CEyg9tcu.js","assets/js/auth-HiWjNVol.js","assets/js/legacyUserMigration-eNETLKah.js","assets/js/enums-C0TfsRui.js","assets/js/migrateLegacyUserMessageHandler-HceDQnYT.js","assets/js/onboarding-Cm39YS_P.js","assets/js/modal-CXkRDJ21.js","assets/js/v-style-8O6T7tyx.js","assets/js/internalDataMetrics-iQDg_iJD.js","assets/js/settings-rA0qDzbq.js","assets/js/TimeframeService-Bnjub5ug.js","assets/js/streaks-Co8maZu5.js","assets/js/BaseForm-BdYxhfcT.js","assets/js/BaseMessage-BBabi6Dl.js","assets/css/BaseMessage-r5wpiN8K.css","assets/js/ErrorPulseInput-CkNsRuJq.js","assets/css/BaseForm-Dmq27kqX.css","assets/js/AppConfirmCancel-CipvWVDl.js","assets/css/AppConfirmCancel-DbaOXcDd.css","assets/js/FormToggle-CEe10BOr.js","assets/js/FormFieldWrapper-D2Jnr3WU.js","assets/css/FormFieldWrapper-DhQDPdZ3.css","assets/js/ToggleSwitch-DSwcb4Go.js","assets/css/ToggleSwitch-CJxlu7QV.css","assets/css/FormToggle-DUKt37kY.css","assets/js/FormInput-BBZZjhFA.js","assets/js/SoftFocus-BUhesXB-.js","assets/js/compareObjects-R6Hcs7xe.js","assets/js/AppLoading-DWsYUtJy.js","assets/css/AppLoading-DHYBGgbD.css","assets/js/InlineNumberInput-OeifGtjp.js","assets/css/InlineNumberInput-D0yp2QxM.css","assets/js/CircleIndicator-DmVR4vlz.js","assets/css/CircleIndicator-BLqDnS_I.css","assets/css/FocusModeInsightsApp-BhvKL2Hz.css"])))=>i.map(i=>d[i]);
import{_ as e}from"./style-cpFB66wV.js";import{u as t}from"./useAllComponentsMounted-RTvHVD2I.js";import{I as s,i,d as a,e as o,A as r,W as p,a3 as n}from"./index-DY0DW88M.js";import{a as c}from"./appZStack-B9FmF8l5.js";import d from"./icon-confetti-BvRSomF2.js";import{u as l}from"./internalDataMetrics-iQDg_iJD.js";import{u}from"./useAppToggle-GEGV5YXE.js";import{u as h}from"./focusModeInsightsViewState-CgeWEHYD.js";import{C as g}from"./CircleIndicator-DmVR4vlz.js";import{e as f}from"./DataSyncService-BnTv72BN.js";import{d as A,L as v}from"./state-odjm2uKU.js";import{A as M}from"./AppDash-CNft_R_U.js";import{g as _}from"./settings-rA0qDzbq.js";import{n as b}from"./_plugin-vue2_normalizer-DeUNqxFl.js";import{computed as w}from"./reactiveCustomization-B8WwDagp.js";import{a as y}from"./modal-CXkRDJ21.js";import{a as C}from"./constants-KuzCZNtH.js";import I from"./BaseIcon-Bb2ZVMd4.js";import D from"./AppContainer-Dy_GGrtc.js";import{B as j}from"./BaseMetric-ClLQP9bU.js";import{U as S}from"./enums-C0TfsRui.js";const V=new r({feature:"focus-mode-insights"});const k=b(s({name:"FocusModeMetric",components:{AppDash:M,FocusModeInsightsApp:()=>e((()=>import("./FocusModeInsightsApp-CgAiIVqy.js")),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87])),CircleIndicator:g},setup:()=>({...u(h,{analytics:V}),internalDataMetrics:l()}),computed:{timeFocusedFriendlyStringMetric(){return this.internalDataMetrics.getMetric("pomodoroStats","today")},timeFocusedFriendlyString(){return this.timeFocusedFriendlyStringMetric.value.getterValue||"-"},goalDays(){return this.settings.goalDays},goalEnabled(){return this.settings.goalEnabled},goalMinutes(){return this.settings.goalMinutes},todayMinutesMetric(){return this.internalDataMetrics.getMetric("pomodoroStats","todayMinutes")},indicatorProgress(){if(null===this.todayMinutesMetric.value.getterValue||!this.todayMinutesMetric.value.storeLoaded)return 0;const e=this.todayMinutesMetric.value.getterValue;return Math.max(Math.min(e,this.goalMinutes),0)/this.goalMinutes},circleIndicatorVisible(){return!!this.goalEnabled&&this.goalDays.includes(i())},canShowNotification(){return 1===this.indicatorProgress&&a.tabVisible&&this.circleIndicatorVisible&&A.currentValue},settings:()=>_()},watch:{async canShowNotification(e){if(!e)return;const t=localStorage.getItem(v);t&&o(new Date(Number(t)))===o(new Date)||(this.setLastShowDateIfCompleted(),f.$emit("flashMessage",{message:"Focus Goal completed!",icon:d,persist:5e3,confetti:!0}))},goalMinutes(e,t){t>0&&e>0&&e!==t&&1!==this.indicatorProgress&&localStorage.removeItem(v)}},mounted(){m.on("focusInsights:toggle",this.togglePopup),m.on("focusMode:starting",this.setLastShowDateIfCompleted)},destroyed(){m.off("focusInsights:toggle",this.togglePopup),m.off("focusMode:starting",this.setLastShowDateIfCompleted)},methods:{setLastShowDateIfCompleted(){1===this.indicatorProgress&&localStorage.setItem(v,`${Date.now()}`)},triggerAppOpenEvent(){m.trigger("focusInsightsApp:opened")},triggerAppCloseEvent(){m.trigger("focusInsightsApp:closed")}}}),(function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:e.closePopup,expression:"closePopup"}],staticClass:"focus-mode-metric"},[t("app-dash",{attrs:{label:"Focused Today","app-visible":e.popupActive,"blur-background-hover":!0,"data-test":"focus-mode-insight"},on:{click:e.togglePopupAndCaptureIfOpen},scopedSlots:e._u([{key:"icon",fn:function(){return[e.circleIndicatorVisible?t("circle-indicator",{attrs:{progress:e.indicatorProgress,"data-test":"circle-indicator-svg","data-circle-progress":e.indicatorProgress}}):e._e()]},proxy:!0},{key:"icon-right",fn:function(){return[t("span",{attrs:{"data-test":"time-focused-string"}},[e._v(e._s(e.timeFocusedFriendlyString))])]},proxy:!0}])}),t("transition",{attrs:{name:"slide-down-fade-blurred-app"},on:{"after-enter":e.triggerAppOpenEvent,"after-leave":e.triggerAppCloseEvent}},[e.popupActive?t("focus-mode-insights-app",{staticClass:"hide-apps-fade",on:{close:e.togglePopupAndCaptureIfOpen}}):e._e()],1)],1)}),[],!1,null,"1075e2e9").exports,P={[j.Clock]:{name:"World Clock",icon:"icon/apps/clocks",upsellId:S.WORLD_CLOCKS},[j.Countdown]:{name:"Countdown",icon:"icon/apps/countdowns",upsellId:S.COUNTDOWNS},[j.Metric]:{name:"Metric",icon:"icon/apps/metrics",upsellId:S.METRICS}},x=new r({feature:"meta add"}),E=s({name:"AddMetric",components:{AppView:()=>e((()=>import("./AppView-Du2InOAV.js")),__vite__mapDeps([25,8,26])),AppHeader:()=>e((()=>import("./AppHeader-DINik7Wl.js")),__vite__mapDeps([27,28,8,29,30,31,32])),AppContainer:D,BaseIcon:I,AppDash:M,AppPopup:()=>e((()=>import("./AppPopup-whOF9ytj.js")),__vite__mapDeps([5,6,7,1,2,3,4,8,9])),FocusModeMetric:k},props:{disable:{type:Boolean,default:!1},forceActive:{type:Boolean,default:!1}},emits:["add"],setup:()=>({...t({widgetId:"addMetric"}),AddMetricTypeData:P}),data:()=>({popupActive:!1}),computed:{focused:{get:()=>c.isOnTop("addMetric"),set(e){e?c.add("addMetric"):c.remove("addMetric")}},focusModeInsightVisible(){return w.focusInsightVisible&&!this.$plus&&!p()},showLabel:()=>w.dashAppTextLabels===C.Always,weatherOrCalendarVisible:()=>w.weatherVisible||w.calendarVisible,weatherDashAppWidth:()=>w.weatherVisible?a.weatherDashAppWidth:0,calendarDashAppWidth:()=>w.calendarVisible?a.calendarDashAppWidth:0},methods:{add(e,t){this.$plus?(this.closeApp(),this.$emit("add",e)):y(t,"dash")},toggleApp(){this.popupActive?this.closeApp():this.showApp()},showApp(){this.disable||(this.popupActive=!0,this.focused=!0,x.capture("meta add click"))},closeApp(){this.popupActive&&(this.popupActive=!1,this.focused=!1)}}}),F=()=>{n(((e,t)=>({"0ffc5d34":e.weatherDashAppWidth,"1252221a":e.calendarDashAppWidth})))},O=E.setup;E.setup=O?(e,t)=>(F(),O(e,t)):F;const L=b(E,(function(){var e=this,t=e._self._c;return e._self._setupProxy,t("app-container",{staticClass:"add-metric needs-hover",class:{active:e.popupActive||e.forceActive},attrs:{"app-name":"add-metric","deep-transition-app-dash":!0}},[t("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:e.closeApp,expression:"closeApp"}],staticClass:"add-metric-container"},[t("app-dash",{attrs:{icon:"grid-2x2-plus",label:"Add","app-visible":e.popupActive||e.forceActive,"blur-background-hover":!0,"data-ob":"add-metric","data-test":"add-metric-dash"},on:{click:e.toggleApp}}),t("transition",{attrs:{name:"slide-down-fade-blurred-app"}},[e.popupActive?t("app-popup",{staticClass:"hide-apps-fade",attrs:{position:"bottom-left",region:"top-right",width:420,focused:e.focused},on:{close:function(t){e.popupActive=!1}},nativeOn:{click:function(t){e.focused=!0}}},[t("app-view",{scopedSlots:e._u([{key:"header",fn:function(){return[t("app-header",{on:{close:e.closeApp},scopedSlots:e._u([{key:"left",fn:function(){return[t("base-icon",{staticClass:"app-header-icon",attrs:{src:"grid-2x2-plus",size:"16px"}}),t("span",{staticClass:"app-header-name"},[e._v("Add")])]},proxy:!0}],null,!1,1716665500)})]},proxy:!0},{key:"body",fn:function(){return[t("div",{staticClass:"tiles"},e._l(e.AddMetricTypeData,(function(s,i){return t("div",{key:i,staticClass:"tile",attrs:{"data-test":`add-${i}`},on:{click:function(t){return e.add(i,s.upsellId)}}},[t("base-icon",{staticClass:"widget-icon",attrs:{src:s.icon,size:"24px"}}),t("div",{staticClass:"widget-name"},[e._v(e._s(s.name))]),e.$plus?e._e():t("span",{staticClass:"badge badge-plus"},[e._v("Plus")])],1)})),0)]},proxy:!0}],null,!1,2413660523)})],1):e._e()],1)],1),t("transition",{attrs:{name:"fade"}},[e.focusModeInsightVisible?t("focus-mode-metric",{key:"focus-mode-insight"}):e._e()],1),e.weatherOrCalendarVisible&&!e.$plus?t("div",{staticClass:"top-right-dash-measure",class:{labels:e.showLabel}}):e._e()],1)}),[],!1,null,"8c7319dd").exports;export{L as A,k as F,P as a};
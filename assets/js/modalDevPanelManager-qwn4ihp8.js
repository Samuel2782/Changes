import{V as e,d as t}from"./index-DY0DW88M.js";import{g as i,d as s}from"./onboarding-CbWaAKel.js";import"./Logger-CErMjlBd.js";import"./style-cpFB66wV.js";import"./DataSyncService-BnTv72BN.js";import"./enums-C0TfsRui.js";import"./helpers-Dah3fQ_V.js";import"./TabLeaderElection-S4Ghxpfd.js";import"./state-odjm2uKU.js";import"./LocalStorageStoreSyncedItem-kVGQtJA7.js";import"./onboarding-Cm39YS_P.js";import"./compareObjects-R6Hcs7xe.js";import"./modal-DiTGFINU.js";import"./SubscriptionSummary-BQ9oLLHV.js";import"./persistStore-CE5fTtZd.js";import"./reactiveCustomization-B8WwDagp.js";import"./constants-CALDQiUE.js";import"./constants-KuzCZNtH.js";import"./state-DDN7j9xD.js";import"./constants-CHIvVb_r.js";import"./authService-CEyg9tcu.js";import"./auth-HiWjNVol.js";import"./legacyUserMigration-eNETLKah.js";import"./migrateLegacyUserMessageHandler-HceDQnYT.js";import"./login-ByohQG_J.js";import"./index-DM3Q2nkp.js";import"./PomodoroTimers-CqOVDo7T.js";import"./settings-rA0qDzbq.js";import"./experiments-D9-xSE76.js";import"./settingsViewState-ZEr74HQm.js";import"./ViewState-DzCxxm0h.js";import"./appZStack-B9FmF8l5.js";import"./siteBlockerGroups-CkkkdBQZ.js";import"./ErrorPulseInput-CkNsRuJq.js";import"./SettingsTypes-C_Wf2Ybw.js";import"./accessToken-q_Kr5K6L.js";import"./tasksMockData-9Ir8-V1W.js";import"./tasksViewState-DGees08o.js";const n=new(e.extend({name:"ModalDevPanelManager",data:()=>({experimentMap:i(),definitions:s,pinnedStep:null}),methods:{setStepActive(e,t){const i=()=>m.trigger("modal:show",e,{subStepIndex:t,force:!0});m.modals?i():m.once("modalContainer:created:checkForced",i)},setPinnedStepActiveOnDashLoad({stepId:e,subStepIndex:i,experimentId:s,variantId:n}={}){let p;if(s){const t=this.experimentMap[s],i=t&&t.variants[n];p=i&&i.steps[e]}else p=this.definitions[e];p&&(this.toggleStepPinned(p,{stepId:e,subStepIndex:i,experimentId:s,variantId:n}),t.appsReady?this.setStepActive(p,i):m.once("appsReady",(()=>{this.setStepActive(p,i)})))},toggleStepPinned(e,{stepId:t,subStepIndex:i,experimentId:s,variantId:n}={}){const p=localStorage.getObject("devPanel:pinnedStep");p?this.objectsMatch(p,{stepId:t,subStepIndex:i,experimentId:s,variantId:n})?(this.$set(e,"pinned",!e.pinned),this.pinnedStep=e.pinned?e:null,this.updateSubStepIndex(e,e.pinned?i:void 0),null===this.pinnedStep&&m.trigger("modal:close")):this.objectsMatch((({stepId:e,experimentId:t,variantId:i})=>({stepId:e,experimentId:t,variantId:i}))(p),{stepId:t,experimentId:s,variantId:n})?this.updateSubStepIndex(e,i):(this.pinnedStep&&(this.$set(this.pinnedStep,"pinned",!1),this.updateSubStepIndex(this.pinnedStep,void 0)),this.$set(e,"pinned",!0),this.updateSubStepIndex(e,i),this.pinnedStep=e):(this.$set(e,"pinned",!0),this.pinnedStep=e,this.updateSubStepIndex(e,i)),e.pinned?localStorage.setObject("devPanel:pinnedStep",{stepId:t,subStepIndex:i,experimentId:s,variantId:n}):localStorage.removeItem("devPanel:pinnedStep")},updateSubStepIndex(e,t){void 0===t?this.$delete(e,"pinnedSubStepIndex"):this.$set(e,"pinnedSubStepIndex",t)},objectsMatch:(e,t)=>new Array(...new Set([...Object.keys(e),...Object.keys(t)])).every((i=>e[i]===t[i]))}}));export{n as default};
import{L as t,l as o}from"./loginStepMixin-B3i6khqZ.js";import{L as s}from"./LoginPasswordInput-VC36IoxP.js";import{l as i}from"./enums-C0TfsRui.js";import{a as e}from"./authService-CEyg9tcu.js";import{O as r}from"./OAuthButton-v1b4EHQt.js";import a from"./icon-back-D7vBl-rG.js";import{n}from"./_plugin-vue2_normalizer-DeUNqxFl.js";import"./SmoothReflow-Cnw3bIxd.js";import"./ResizeSensor-ZXOsDHeC.js";import"./useAllComponentsMounted-RTvHVD2I.js";import"./index-DY0DW88M.js";import"./Logger-CErMjlBd.js";import"./style-cpFB66wV.js";import"./DataSyncService-BnTv72BN.js";import"./BaseMessage-BBabi6Dl.js";import"./BaseIcon-Bb2ZVMd4.js";import"./dynamic-import-helper-DIl3ayLm.js";import"./logo-white-B6YRYJ5A.js";import"./icon-next-CI-_n-sg.js";import"./LoginInput-DmRHxDuQ.js";import"./SoftFocus-BUhesXB-.js";import"./MobileBlur-B2s9dLKD.js";import"./icon-visible-on-DF1CdqCc.js";import"./icon-visible-off-CwNdVUTo.js";import"./auth-HiWjNVol.js";import"./persistStore-CE5fTtZd.js";import"./legacyUserMigration-eNETLKah.js";import"./migrateLegacyUserMessageHandler-HceDQnYT.js";import"./reactiveCustomization-B8WwDagp.js";import"./icon-apple-dpDSqZSz.js";import"./google-NyzgtnG4.js";import"./ssoHelpers-CwDzHOwZ.js";import"./onboarding-CbWaAKel.js";import"./helpers-Dah3fQ_V.js";import"./TabLeaderElection-S4Ghxpfd.js";import"./state-odjm2uKU.js";import"./LocalStorageStoreSyncedItem-kVGQtJA7.js";import"./onboarding-Cm39YS_P.js";import"./compareObjects-R6Hcs7xe.js";import"./modal-DiTGFINU.js";import"./SubscriptionSummary-BQ9oLLHV.js";import"./constants-CALDQiUE.js";import"./constants-KuzCZNtH.js";import"./state-DDN7j9xD.js";import"./constants-CHIvVb_r.js";import"./login-ByohQG_J.js";import"./index-DM3Q2nkp.js";import"./PomodoroTimers-CqOVDo7T.js";import"./settings-rA0qDzbq.js";import"./experiments-D9-xSE76.js";import"./settingsViewState-ZEr74HQm.js";import"./ViewState-DzCxxm0h.js";import"./appZStack-B9FmF8l5.js";import"./siteBlockerGroups-CkkkdBQZ.js";import"./ErrorPulseInput-CkNsRuJq.js";import"./SettingsTypes-C_Wf2Ybw.js";import"./accessToken-q_Kr5K6L.js";import"./tasksMockData-9Ir8-V1W.js";import"./tasksViewState-DGees08o.js";const p=n({name:"LoginChoosePassword",components:{LoginPasswordInput:s,LoginLayout:t,OAuthButton:r},mixins:[o],inject:["capture"],props:{loginProviders:{type:Array,default:()=>[]}},data:()=>({password:"",message:"Minimum 6 characters. You will be sent an email to confirm it before you can login"}),mounted(){this.capture("password-step show",{case:"create"})},methods:{onEnter(){this.setPassword()},onEscape(){this.goToEmail("hotkey")},goToEmail(t="click"){this.capture("change email click",{method:t}),this.$emit("goToSubStep",i.EMAIL)},setPassword(){return this.setLoadingWithErrorHandling((async()=>{await e.resetPassword(this.name,this.email,this.password,{newsletterOptIn:!1}),this.capture("password-step complete",{case:"create"}),this.$emit("update:loading",!1),this.$emit("goToSubStep",i.RESET_PASSWORD_SENT)}))},capturePrivacyClick(){this.capture("privacy click")}}},(function(){var t=this,o=t._self._c;return o("login-layout",{attrs:{message:t.computedMessage,loading:t.loading,"data-test":"choose-password-step"},on:{submit:t.setPassword},scopedSlots:t._u([{key:"actions-top-left",fn:function(){return[o("div",{staticClass:"dash-button",attrs:{"data-test":"email-button"},on:{click:t.goToEmail}},[o("inline-svg",{staticClass:"icon icon-back",attrs:{src:a}}),o("span",[t._v("Email")])],1)]},proxy:!0},{key:"title",fn:function(){return[t._v(" Adding password to account ")]},proxy:!0},{key:"question",fn:function(){return[t._v(" Please choose a password. ")]},proxy:!0},{key:"input",fn:function(){return[o("login-password-input",{ref:"login-input",attrs:{disabled:t.loading},on:{submit:t.setPassword},model:{value:t.password,callback:function(o){t.password=o},expression:"password"}})]},proxy:!0},{key:"continue-message",fn:function(){return[t._v(" Create password ")]},proxy:!0},{key:"below-continue",fn:function(){return[t.loginProviders.length?o("div",{staticClass:"third-party-help"},[o("div",[t._v("You have previously logged in with a third party. You can login without setting a password using your original sign-in method")]),t.loginProviders.includes("google")?o("o-auth-button",{attrs:{type:"google"}}):t._e(),t.loginProviders.includes("apple")?o("o-auth-button",{attrs:{type:"apple"}}):t._e()],1):t._e()]},proxy:!0}])})}),[],!1,null,null).exports;export{p as default};
import e from"./BaseIcon-Bb2ZVMd4.js";import{n as r}from"./_plugin-vue2_normalizer-DeUNqxFl.js";import{c as t,g as n}from"./_commonjsHelpers-B3K3fdV-.js";const o=r({name:"AppSearch",components:{BaseIcon:e},props:{value:{type:String,required:!0},disableAndEmitLeftRight:{type:Boolean,default:!1}},emits:["input","enter","blur","focus","up","down","left","right"],methods:{clear(){this.$emit("input",""),this.focus()},clearAndBlur(){this.$emit("input",""),this.$refs.search.blur()},focus(){this.$refs.search.focus()},select(){this.$refs.search.select()},onFocus(){this.$emit("focus")},onBlur(){this.$emit("blur")},stopAndPreventLeftRight(e,r){this.disableAndEmitLeftRight&&(e.preventDefault(),e.stopPropagation(),this.$emit(r))}}},(function(){var e=this,r=e._self._c;return r("div",{staticClass:"app-search"},[r("base-icon",{staticClass:"search-icon",attrs:{src:"search","stroke-width":"3px"}}),r("input",{ref:"search",attrs:{type:"text",name:"search","data-test":"search-input",placeholder:"Search",autocomplete:"off"},domProps:{value:e.value},on:{input:function(r){return e.$emit("input",r.target.value)},keydown:[function(r){return!r.type.indexOf("key")&&e._k(r.keyCode,"enter",13,r.key,"Enter")?null:e.$emit("enter")},function(r){return!r.type.indexOf("key")&&e._k(r.keyCode,"up",38,r.key,["Up","ArrowUp"])?null:(r.stopPropagation(),r.preventDefault(),e.$emit("up"))},function(r){return!r.type.indexOf("key")&&e._k(r.keyCode,"down",40,r.key,["Down","ArrowDown"])?null:(r.stopPropagation(),r.preventDefault(),e.$emit("down"))},function(r){return!r.type.indexOf("key")&&e._k(r.keyCode,"left",37,r.key,["Left","ArrowLeft"])||"button"in r&&0!==r.button?null:e.stopAndPreventLeftRight(r,"left")},function(r){return!r.type.indexOf("key")&&e._k(r.keyCode,"right",39,r.key,["Right","ArrowRight"])||"button"in r&&2!==r.button?null:e.stopAndPreventLeftRight(r,"right")}],keyup:function(r){return!r.type.indexOf("key")&&e._k(r.keyCode,"esc",27,r.key,["Esc","Escape"])?null:(r.stopPropagation(),e.clearAndBlur.apply(null,arguments))},focus:e.onFocus,blur:e.onBlur}}),r("transition",{attrs:{name:"fade-fast"}},[e.value.length?r("div",{staticClass:"icon-wrapper clear-search",on:{click:e.clear}},[r("base-icon",{staticClass:"clear-icon",attrs:{src:"x","stroke-width":"2.5px"}})],1):e._e()])],1)}),[],!1,null,"36f8eddd").exports;var s,i,a,l,f={exports:{}};const c=n((s||(s=1,a=t,l=e=>{var r=e=>{"number"==typeof e?e=""+e:"string"!=typeof e&&(e="");var r=d(e);return o(e,{_targetLower:r._lower,_targetLowerCodes:r.lowerCodes,_bitflags:r.bitflags})};class t{get indexes(){return this._indexes.slice(0,this._indexes.len).sort(((e,r)=>e-r))}set indexes(e){return this._indexes=e}highlight(e,r){return((e,r="<b>",t="</b>")=>{for(var n="function"==typeof r?r:void 0,o=e.target,s=o.length,i=e.indexes,a="",l=0,f=0,c=!1,u=[],p=0;p<s;++p){var g=o[p];if(i[f]===p){if(++f,c||(c=!0,n?(u.push(a),a=""):a+=r),f===i.length){n?(a+=g,u.push(n(a,l++)),a="",u.push(o.substr(p+1))):a+=g+t+o.substr(p+1);break}}else c&&(c=!1,n?(u.push(n(a,l++)),a=""):a+=t);a+=g}return n?u:a})(this,e,r)}get score(){return s(this._score)}set score(e){this._score=i(e)}}class n extends Array{get score(){return s(this._score)}set score(e){this._score=i(e)}}var o=(e,r)=>{const n=new t;return n.target=e,n.obj=r.obj??E,n._score=r._score??B,n._indexes=r._indexes??[],n._targetLower=r._targetLower??"",n._targetLowerCodes=r._targetLowerCodes??E,n._nextBeginningIndexes=r._nextBeginningIndexes??E,n._bitflags=r._bitflags??0,n},s=e=>e===B?0:e>1?e:Math.E**(-2*((1-e)**.04307-1)),i=e=>0===e?B:e>1?e:1-Math.pow(Math.log(e)/-2+1,1/.04307),a=e=>{"number"==typeof e?e=""+e:"string"!=typeof e&&(e=""),e=e.trim();var r=d(e),t=[];if(r.containsSpace){var n=e.split(/\s+/);n=[...new Set(n)];for(var o=0;o<n.length;o++)if(""!==n[o]){var s=d(n[o]);t.push({lowerCodes:s.lowerCodes,_lower:n[o].toLowerCase(),containsSpace:!1})}}return{lowerCodes:r.lowerCodes,_lower:r._lower,containsSpace:r.containsSpace,bitflags:r.bitflags,spaceSearches:t}},l=e=>{if(e.length>999)return r(e);var t=h.get(e);return void 0!==t||(t=r(e),h.set(e,t)),t},f=e=>{if(e.length>999)return a(e);var r=v.get(e);return void 0!==r||(r=a(e),v.set(e,r)),r},c=(e,r)=>{var t=[];t.total=e.length;var s=(null==r?void 0:r.limit)||S;if(null==r?void 0:r.key)for(var i=0;i<e.length;i++){var a=e[i];if((p=A(a,r.key))!=E){L(p)||(p=l(p));var f=o(p.target,{_score:p._score,obj:a});if(t.push(f),t.length>=s)return t}}else if(null==r?void 0:r.keys)for(i=0;i<e.length;i++){a=e[i];for(var c=new n(r.keys.length),u=r.keys.length-1;u>=0;--u)(p=A(a,r.keys[u]))?(L(p)||(p=l(p)),p._score=B,p._indexes.len=0,c[u]=p):c[u]=O;if(c.obj=a,c._score=B,t.push(c),t.length>=s)return t}else for(i=0;i<e.length;i++){var p;if((p=e[i])!=E&&(L(p)||(p=l(p)),p._score=B,p._indexes.len=0,t.push(p),t.length>=s))return t}return t},u=(e,r,n=!1,o=!1)=>{if(!1===n&&e.containsSpace)return p(e,r,o);for(var s=e._lower,i=e.lowerCodes,a=i[0],l=r._targetLowerCodes,f=i.length,c=l.length,u=0,g=0,d=0;;){if(a===l[g]){if(x[d++]=g,++u===f)break;a=i[u]}if(++g>=c)return E}u=0;var h=!1,v=0,k=r._nextBeginningIndexes;k===E&&(k=r._nextBeginningIndexes=_(r.target));var b=0;if((g=0===x[0]?0:k[x[0]-1])!==c)for(;;)if(g>=c){if(u<=0)break;if(++b>200)break;--u;var w=y[--v];g=k[w]}else if(i[u]===l[g]){if(y[v++]=g,++u===f){h=!0;break}++g}else g=k[g];var m=f<=1?-1:r._targetLower.indexOf(s,x[0]),C=!!~m,A=!!C&&(0===m||r._nextBeginningIndexes[m-1]===m);if(C&&!A)for(var L=0;L<k.length;L=k[L])if(!(L<=m)){for(var S=0;S<f&&i[S]===r._targetLowerCodes[L+S];S++);if(S===f){m=L,A=!0;break}}var B=e=>{for(var r=0,t=0,n=1;n<f;++n)e[n]-e[n-1]!=1&&(r-=e[n],++t);if(r-=(e[f-1]-e[0]-(f-1)+12)*t,0!==e[0]&&(r-=e[0]*e[0]*.2),h){var o=1;for(n=k[0];n<c;n=k[n])++o;o>24&&(r*=10*(o-24))}else r*=1e3;return r-=(c-f)/2,C&&(r/=1+f*f*1),A&&(r/=1+f*f*1),r-=(c-f)/2};if(h)if(A){for(L=0;L<f;++L)x[L]=m+L;$=x,j=B(x)}else $=y,j=B(y);else{if(C)for(var L=0;L<f;++L)x[L]=m+L;var $,j=B($=x)}for(r._score=j,L=0;L<f;++L)r._indexes[L]=$[L];r._indexes.len=f;const I=new t;return I.target=r.target,I._score=r._score,I._indexes=r._indexes,I},p=(e,r,t)=>{for(var n=new Set,o=0,s=E,i=0,a=e.spaceSearches,l=a.length,f=0,c=()=>{for(let e=f-1;e>=0;e--)r._nextBeginningIndexes[k[2*e+0]]=k[2*e+1]},p=!1,g=0;g<l;++g){w[g]=B;var d=a[g];if(s=u(d,r),t){if(s===E)continue;p=!0}else if(s===E)return c(),E;if(g!==l-1){var _=s._indexes,h=!0;for(let e=0;e<_.len-1;e++)if(_[e+1]-_[e]!=1){h=!1;break}if(h){var v=_[_.len-1]+1,x=r._nextBeginningIndexes[v-1];for(let e=v-1;e>=0&&x===r._nextBeginningIndexes[e];e--)r._nextBeginningIndexes[e]=v,k[2*f+0]=e,k[2*f+1]=x,f++}}o+=s._score/l,w[g]=s._score/l,s._indexes[0]<i&&(o-=2*(i-s._indexes[0])),i=s._indexes[0];for(var y=0;y<s._indexes.len;++y)n.add(s._indexes[y])}if(t&&!p)return E;c();var b=u(e,r,!0);if(b!==E&&b._score>o){if(t)for(g=0;g<l;++g)w[g]=b._score/l;return b}t&&(s=r),s._score=o,g=0;for(let u of n)s._indexes[g++]=u;return s._indexes.len=g,s},g=e=>e.replace(new RegExp("\\p{Script=Latin}+","gu"),(e=>e.normalize("NFD"))).replace(/[\u0300-\u036f]/g,""),d=e=>{for(var r=(e=g(e)).length,t=e.toLowerCase(),n=[],o=0,s=!1,i=0;i<r;++i){var a=n[i]=t.charCodeAt(i);32!==a?o|=1<<(a>=97&&a<=122?a-97:a>=48&&a<=57?26:a<=127?30:31):s=!0}return{lowerCodes:n,bitflags:o,containsSpace:s,_lower:t}},_=e=>{for(var r=(e=g(e)).length,t=(e=>{for(var r=e.length,t=[],n=0,o=!1,s=!1,i=0;i<r;++i){var a=e.charCodeAt(i),l=a>=65&&a<=90,f=l||a>=97&&a<=122||a>=48&&a<=57,c=l&&!o||!s||!f;o=l,s=f,c&&(t[n++]=i)}return t})(e),n=[],o=t[0],s=0,i=0;i<r;++i)o>i?n[i]=o:(o=t[++s],n[i]=void 0===o?r:o);return n},h=new Map,v=new Map,x=[],y=[],k=[],b=[],w=[],m=[],C=[],A=(e,r)=>{var t=e[r];if(void 0!==t)return t;if("function"==typeof r)return r(e);var n=r;Array.isArray(r)||(n=r.split("."));for(var o=n.length,s=-1;e&&++s<o;)e=e[n[s]];return e},L=e=>"object"==typeof e&&"number"==typeof e._bitflags,S=1/0,B=-S,$=[];$.total=0;var j,I,P,R,E=null,O=r(""),D=(j=[],I=0,R=e=>{for(var r=0,t=j[r],n=1;n<I;){var o=n+1;r=n,o<I&&j[o]._score<j[n]._score&&(r=o),j[r-1>>1]=j[r],n=1+(r<<1)}for(var s=r-1>>1;r>0&&t._score<j[s]._score;s=(r=s)-1>>1)j[r]=j[s];j[r]=t},(P={}).add=e=>{var r=I;j[I++]=e;for(var t=r-1>>1;r>0&&e._score<j[t]._score;t=(r=t)-1>>1)j[r]=j[t];j[r]=e},P.poll=e=>{if(0!==I){var r=j[0];return j[0]=j[--I],R(),r}},P.peek=e=>{if(0!==I)return j[0]},P.replaceTop=e=>{j[0]=e,R()},P);return{single:(e,r)=>{if(!e||!r)return E;var t=f(e);L(r)||(r=l(r));var n=t.bitflags;return(n&r._bitflags)!==n?E:u(t,r)},go:(e,r,t)=>{if(!e)return(null==t?void 0:t.all)?c(r,t):$;var o=f(e),s=o.bitflags,a=o.containsSpace,p=i((null==t?void 0:t.threshold)||0),g=(null==t?void 0:t.limit)||S,d=0,_=0,h=r.length;function v(e){d<g?(D.add(e),++d):(++_,e._score>D.peek()._score&&D.replaceTop(e))}if(null==t?void 0:t.key)for(var x=t.key,y=0;y<h;++y){var k=r[y];(U=A(k,x))&&(L(U)||(U=l(U)),(s&U._bitflags)===s&&(q=u(o,U))!==E&&(q._score<p||(q.obj=k,v(q))))}else if(null==t?void 0:t.keys){var j=t.keys,I=j.length;e:for(y=0;y<h;++y){k=r[y];for(var P=0,R=0;R<I;++R)x=j[R],(U=A(k,x))?(L(U)||(U=l(U)),m[R]=U,P|=U._bitflags):m[R]=O;if((s&P)===s){if(a)for(let e=0;e<o.spaceSearches.length;e++)b[e]=B;for(R=0;R<I;++R)if((U=m[R])!==O)if(C[R]=u(o,U,!1,a),C[R]!==E){if(a)for(let e=0;e<o.spaceSearches.length;e++)w[e]>-1e3&&b[e]>B&&(T=(b[e]+w[e])/4)>b[e]&&(b[e]=T),w[e]>b[e]&&(b[e]=w[e])}else C[R]=O;else C[R]=O;if(a){for(let e=0;e<o.spaceSearches.length;e++)if(b[e]===B)continue e}else{var F=!1;for(let e=0;e<I;e++)if(C[e]._score!==B){F=!0;break}if(!F)continue}var M=new n(I);for(let e=0;e<I;e++)M[e]=C[e];if(a){var z=0;for(let e=0;e<o.spaceSearches.length;e++)z+=b[e]}else{z=B;for(let e=0;e<I;e++){var T;(q=M[e])._score>-1e3&&z>B&&(T=(z+q._score)/4)>z&&(z=T),q._score>z&&(z=q._score)}}if(M.obj=k,M._score=z,null==t?void 0:t.scoreFn){if(!(z=t.scoreFn(M)))continue;z=i(z),M._score=z}z<p||v(M)}}}else for(y=0;y<h;++y){var U,q;(U=r[y])&&(L(U)||(U=l(U)),(s&U._bitflags)===s&&(q=u(o,U))!==E&&(q._score<p||v(q)))}if(0===d)return $;var H=new Array(d);for(y=d-1;y>=0;--y)H[y]=D.poll();return H.total=d+_,H},prepare:r,cleanup:()=>{h.clear(),v.clear()}}},(i=f).exports?i.exports=l():a.fuzzysort=l()),f.exports));export{o as A,c as f};
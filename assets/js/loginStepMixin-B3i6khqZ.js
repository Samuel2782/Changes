import{S as t}from"./SmoothReflow-Cnw3bIxd.js";import{B as s}from"./BaseMessage-BBabi6Dl.js";import{_ as e}from"./logo-white-B6YRYJ5A.js";import a from"./icon-next-CI-_n-sg.js";import{n as i}from"./_plugin-vue2_normalizer-DeUNqxFl.js";import{L as o,a2 as n,a as l}from"./index-DY0DW88M.js";const r=i({name:"LoginLayout",components:{BaseMessage:s,SmoothReflow:t},props:{loading:{type:Boolean,default:!1},continueButtonWrapperVisible:{type:Boolean,default:!0},message:{type:[Object,String],default:null}},methods:{hasMessage(){var t,s,e,a;if(this.message)return!0;const i=null==(e=null==(s=(t=this.$scopedSlots).message)?void 0:s.call(t))?void 0:e[0];return!!i&&(!!i.context||!!(null==(a=i.text)?void 0:a.replaceAll("\t","").replaceAll("\n","")))}}},(function(){var t=this,s=t._self._c;return s("div",{staticClass:"login-layout dark-full"},[s("div",{staticClass:"login-top"},[s("div",{staticClass:"actions-top-left"},[t._t("actions-top-left")],2),s("img",{staticClass:"logo",attrs:{src:e}}),s("div",{staticClass:"actions-top-right"},[t._t("actions-top-right")],2)]),s("div",{staticClass:"login-middle u--scrim"},[s("div",{staticClass:"login-middle-wrapper"},[s("div",{staticClass:"above"},[s("div",{staticClass:"title"},[t._t("title")],2)]),s("div",{staticClass:"prompt"},[s("span",{staticClass:"question",attrs:{"data-test":"question"}},[t._t("question")],2),t._t("input")],2),s("div",{staticClass:"below"},[s("transition",{attrs:{name:"fade-fast",mode:"out-in"}},[t.loading?s("div",{key:"1",staticClass:"below-input-msg loading",attrs:{"data-test":"loading-state"}},[s("span",{staticClass:"loading-icon"}),t._v(" Loading... ")]):s("div",{key:"2",staticClass:"below-input"},[s("smooth-reflow",{attrs:{duration:500}},[t.hasMessage()?s("div",{staticClass:"below-input-msg tip",attrs:{"data-test":"message"}},[t._t("message",(function(){return[s("base-message",t._b({},"base-message","string"==typeof t.message?{message:t.message}:t.message,!1))]}))],2):t._e()]),t._t("below-message"),s("transition",{attrs:{name:"fade-fast",mode:"out-in"}},[t._t("continue-button",(function(){return[s("div",{staticClass:"continue-button-wrapper"},[t._t("alt-continue-button"),s("button",{staticClass:"dash-button",attrs:{"data-test":"continue-button"},on:{click:function(s){return s.stopPropagation(),t.$emit("submit")}}},[t._t("continue-message",(function(){return[t._v(" Continue "),s("inline-svg",{staticClass:"icon icon-next",attrs:{src:a}})]}))],2)],2)]}))],2),t._t("below-continue")],2)])],1)])]),s("div",{staticClass:"login-bottom"},[s("div",{staticClass:"login-bottom-wrapper"},[t._t("bottom")],2),s("div",{staticClass:"scrim"})])])}),[],!1,null,"1e91e229").exports,c={props:{loading:{type:Boolean,required:!0},name:{type:String,required:!0},email:{type:String,required:!0}},data:()=>({message:""}),computed:{computedMessage(){const t=t=>t.replace("{email}",l.removeTags(this.email));return this.message instanceof o?new o({...this.message,message:t(this.message.message)}):t(this.message)}},mounted(){window.addEventListener("keyup",this.onKeyUp)},destroyed(){window.removeEventListener("keyup",this.onKeyUp)},methods:{onKeyUp(t){var s,e;"Enter"===t.key&&(null==(s=this.onEnter)||s.call(this)),"Escape"===t.key&&(null==(e=this.onEscape)||e.call(this))},async setLoadingWithErrorHandling(t,s={focusOnError:!0}){var e;const a=()=>this.$emit("update:loading",!1);if(!this.loading){this.resetMessage();try{this.$emit("update:loading",!0),await t(a)}catch(i){this.message=i instanceof o?i:new o(n.SERVER_ERROR_GENERAL),a(),(null==s?void 0:s.focusOnError)&&(null==(e=this.$refs["login-input"])||e.focus())}}},resetMessage(){this.message=""}}};export{r as L,c as l};
import{F as t,a as e}from"./FormFieldWrapper-D2Jnr3WU.js";import{S as s}from"./SoftFocus-BUhesXB-.js";import{n as u,H as r}from"./index-DY0DW88M.js";import{n as i}from"./_plugin-vue2_normalizer-DeUNqxFl.js";const n=i({name:"FormInput",directives:{SoftFocus:s},components:{FormFieldWrapper:t},inject:["formFields"],props:{value:{type:[String,Number],required:!0},name:{type:String,default:"text-input"},autofocus:{type:Boolean,default:!1},placeholder:{type:String,default:""},type:{type:String,default:"text"},...e},emits:["input"],data:()=>({pulse:!1,preventBlurSubmit:!1}),created(){var t;null==(t=this.formFields)||t.addField(this.name,this.focus,this.pulseAndFocusInput)},destroyed(){var t;null==(t=this.formFields)||t.removeField(this.name)},methods:{async focus(){var t;await u(),null==(t=this.$refs.input)||t.focus()},async pulseAndFocusInput(){await this.focus(),this.pulse=!0,await r(1e3),this.pulse=!1},emitOnInput(t){let e=t.target.value;"number"===this.type&&(e=Number(e)),this.$emit("input",e)},submitOnInput(){var t;null==(t=this.formFields)||t.submitOnFormInput()},submitOnBlur(){var t;this.preventBlurSubmit||null==(t=this.formFields)||t.submitOnFormBlurAndNoneFocused()},submitOnEnter(){var t;this.preventBlurSubmit=!0,null==(t=this.formFields)||t.focusNextInputOrSubmitIfLast(this.name)},setFocused(){this.preventBlurSubmit=!1}}},(function(){var t=this,e=t._self._c;return e("form-field-wrapper",t._b({staticClass:"form-input"},"form-field-wrapper",t.$props,!1),[e("input",{directives:[{name:"soft-focus",rawName:"v-soft-focus",value:t.autofocus,expression:"autofocus"}],ref:"input",staticClass:"hide-controls",class:{pulse:t.pulse},attrs:{type:t.type,"data-test":"form-input",placeholder:t.placeholder,disabled:t.disabled},domProps:{value:t.value},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submitOnEnter.apply(null,arguments)},input:function(e){t.emitOnInput(e),t.submitOnInput()},blur:t.submitOnBlur,focus:t.setFocused}})])}),[],!1,null,null).exports;export{n as F};
import{e}from"./DataSyncService-BnTv72BN.js";import t from"./BaseIcon-Bb2ZVMd4.js";import{B as a,a as i}from"./BaseDropdownContent-Nf5O_5Ty.js";import{N as s}from"./constants-CALDQiUE.js";import{I as o,r as n,n as l}from"./index-DY0DW88M.js";import{n as p}from"./_plugin-vue2_normalizer-DeUNqxFl.js";import"./Logger-CErMjlBd.js";import"./style-cpFB66wV.js";import"./dynamic-import-helper-DIl3ayLm.js";import"./index-CV0q_XsJ.js";const r=p(o({name:"Popup",components:{BaseDropdownContent:a,BaseDropdownContainer:i,BaseIcon:t},props:{id:{type:String,required:!0},targetElementSelector:{type:String,required:!0},targetSelectLast:{type:Boolean,default:!1},elementReadyEvent:{type:String,default:""},position:i.props.position,targetDistance:{type:Number,default:-s/2},alignment:i.props.alignment,alignmentOffset:i.props.alignmentOffset,nippleAlignmentOffset:i.props.nippleAlignmentOffset,subHeaderText:{type:String,default:""},headerBadgeText:{type:String,default:""},headerText:{type:String,default:""},bodyText:{type:String,default:""},ctaText:{type:String,default:"Learn more"},ctaCallback:{type:Function,default:null},ctaClasses:{type:String,default:""},ctaIcon:{type:String,default:""},ctaTriggersComplete:{type:Boolean,default:!1},secondaryText:{type:String,default:""},secondaryCallback:{type:Function,default:null},secondaryClasses:{type:String,default:""},secondaryIcon:{type:String,default:""},secondaryTriggersComplete:{type:Boolean,default:!1},hideCallback:{type:Function,default:null},pulseAnimation:{type:Boolean,default:!0},imageUrl:{type:String,default:""},visualIsVideo:{type:Boolean,default:!1},notificationStyling:{type:Object,default:()=>{}},onboardingStyling:{type:Boolean,default:!1},width:{type:Number,default:390},nippleVisible:{type:Boolean,default:!0},onPopupClicked:{type:Function,default:null},hidden:{type:Boolean,default:!0},subStep:{type:Boolean,default:!1},clickOutsideTriggersDismiss:{type:Boolean,default:!1}},setup:()=>({popupDropdown:n()}),data:()=>({popupStyles:{},popupVisible:!1,eventReady:!1}),watch:{hidden:{async handler(){var e;this.hidden||null==(e=this.popupDropdown)||e.onResize()},immediate:!0}},async mounted(){var t;e.$on("popup:hide",this.hidePopup);const a=async()=>{var t,i;this.popupVisible=!0,this.elementReadyEvent&&(e.$off(this.elementReadyEvent,a),null==(t=window.m)||t.off(this.elementReadyEvent,a),this.eventReady=!0),await l(),null==(i=this.popupDropdown)||i.onResize()};this.getTargetElement()?await a():this.elementReadyEvent?(e.$on(this.elementReadyEvent,a),null==(t=window.m)||t.on(this.elementReadyEvent,a)):(console.error('Popup error: targetElement not found and no "elementReadyEvent" specified'),this.$emit("error"))},destroyed(){e.$off("popup:hide",this.hidePopup)},methods:{async clickCta(){this.ctaCallback&&await this.ctaCallback(),this.ctaTriggersComplete&&this.completeStep()},async clickSecondary(){this.secondaryCallback&&await this.secondaryCallback(),this.secondaryTriggersComplete&&this.completeStep()},completeStep(){if(this.subStep)return this.$emit("subStepComplete");this.$emit("stepComplete")},async close(){this.hideCallback&&await this.hideCallback(),this.$emit("dismiss")},getTargetElement(){const e=document.querySelectorAll(this.targetElementSelector);return e.item(this.targetSelectLast?e.length-1:0)},hidePopup(e){this.popupVisible=!e},async closeIfClickOutside(){this.clickOutsideTriggersDismiss&&await this.close()}}}),(function(){var e=this,t=e._self._c;return e._self._setupProxy,!e.elementReadyEvent||e.eventReady?t("div",{staticClass:"popup-base"},[t("base-dropdown-container",{directives:[{name:"show",rawName:"v-show",value:e.popupVisible,expression:"popupVisible"},{name:"click-outside",rawName:"v-click-outside",value:e.closeIfClickOutside,expression:"closeIfClickOutside"}],ref:"popupDropdown",staticClass:"popup-dropdown app",class:[{"popup-pulse":e.pulseAnimation,"notification-popup":e.notificationStyling,"onboarding-popup":e.onboardingStyling,"brand-full-override":e.notificationStyling,"has-img":!!e.imageUrl,"inverted-system-theme-override":!e.notificationStyling}],attrs:{target:e.getTargetElement(),width:`${e.width}px`,"position-offset":e.targetDistance,alignment:e.alignment,"alignment-offset":e.alignmentOffset,position:e.position,nipple:e.nippleVisible,"close-dropdown":e.hidePopup,"disable-close-event":!0,"nipple-alignment-offset":e.nippleAlignmentOffset,"data-test":"popup","data-test-id":e.id}},[t("base-dropdown-content",{staticClass:"popup-dropdown-content",class:{clickable:!!e.onPopupClicked},on:{click:function(t){var a;null==(a=e.onPopupClicked)||a.call(e)}}},[e.notificationStyling?t("div",{staticClass:"popup-highlight-bar"}):e._e(),e._t("image-content",(function(){return[e.imageUrl?t("div",{staticClass:"popup-image"},[e.visualIsVideo?t("video",{attrs:{src:e.imageUrl,autoplay:!e.$touch,muted:"",loop:""},domProps:{muted:!0}}):t("img",{attrs:{src:e.imageUrl,alt:`${e.headerText} demonstration`}})]):e._e()]})),t("div",{staticClass:"icon-wrapper icon-wrapper-close popup-close",attrs:{"data-test":"close"},on:{click:function(t){return t.stopPropagation(),e.close.apply(null,arguments)}}},[t("base-icon",{attrs:{src:"icon/close",size:e.notificationStyling||e.onboardingStyling?"13px":"11px"}})],1),t("div",{staticClass:"popup-content"},[e.subHeaderText?t("div",{staticClass:"popup-sub-header"},[e._v(e._s(e.subHeaderText))]):e._e(),e.headerText?t("header",{staticClass:"popup-header"},[t("h3",{staticClass:"popup-title",attrs:{"data-test":"header-text"}},[e.headerBadgeText?t("span",{staticClass:"popup-badge"},[e._v(e._s(e.headerBadgeText))]):e._e(),t("span",[e._v(e._s(e.headerText))])])]):e._e(),t("div",{staticClass:"popup-body",attrs:{"data-test":"body-text"}},[e._v(e._s(e.bodyText))]),e._t("body-content"),e.ctaCallback||e.secondaryCallback||e.ctaTriggersComplete?t("div",{staticClass:"popup-footer"},[t("div",{staticClass:"footer-button-row"},[e.ctaCallback||e.ctaTriggersComplete?t("span",{staticClass:"button button-primary",class:[e.ctaClasses],attrs:{"data-test":"cta"},on:{click:function(t){return t.stopPropagation(),e.clickCta.apply(null,arguments)}}},[e.ctaIcon?t("base-icon",{attrs:{src:e.ctaIcon,size:"11px"}}):e._e(),e._v(" "+e._s(e.ctaText)+" "),e.notificationStyling?t("base-icon",{staticClass:"notification-button-chevron",attrs:{src:"icon/chevron-down",size:"11px"}}):e._e()],1):e._e(),e.secondaryCallback||e.secondaryTriggersComplete?t("span",{staticClass:"button button-neutral",class:[e.secondaryClasses],attrs:{"data-test":"secondary"},on:{click:function(t){return t.stopPropagation(),e.clickSecondary.apply(null,arguments)}}},[e.secondaryIcon?t("base-icon",{attrs:{src:e.secondaryIcon,size:"11px"}}):e._e(),e._v(" "+e._s(e.secondaryText)+" ")],1):e._e()]),e._t("footer")],2):e._e()],2)],2)],1)],1):e._e()}),[],!1,null,"b41adaf9").exports;export{r as default};
const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/js/Launchpad-W4P1awiv.js","assets/js/bookmarkUtils-CHte-SKI.js","assets/js/index-DY0DW88M.js","assets/js/Logger-CErMjlBd.js","assets/js/style-cpFB66wV.js","assets/css/style-CrTXrpPu.css","assets/js/promisifiedChrome-B6V9WMyE.js","assets/js/useAllComponentsMounted-RTvHVD2I.js","assets/js/DataSyncService-BnTv72BN.js","assets/js/showAnyway-CR--Ivye.js","assets/js/VueBase-EULQJZ9I.js","assets/js/_commonjsHelpers-B3K3fdV-.js","assets/js/ClickOutside-DCLvi2fj.js","assets/js/pinia-bvFMkYCE.js","assets/js/portal-vue.esm-BDTnR1AQ.js","assets/js/reactiveCustomization-B8WwDagp.js","assets/js/modal-CXkRDJ21.js","assets/js/enums-C0TfsRui.js","assets/js/_plugin-vue2_normalizer-DeUNqxFl.js","assets/css/Launchpad-BuIdXodF.css","assets/js/pomodoroCompleted-Cm_ahB75.js","assets/js/persistStore-CE5fTtZd.js","assets/js/state-odjm2uKU.js","assets/js/LocalStorageStoreSyncedItem-kVGQtJA7.js","assets/js/PomodoroTimers-CqOVDo7T.js","assets/js/login-ByohQG_J.js","assets/js/authService-CEyg9tcu.js","assets/js/auth-HiWjNVol.js","assets/js/legacyUserMigration-eNETLKah.js","assets/js/migrateLegacyUserMessageHandler-HceDQnYT.js","assets/js/onboarding-Cm39YS_P.js"])))=>i.map(i=>d[i]);
import{_ as t}from"./style-cpFB66wV.js";import{I as e,aj as n,E as a,G as s,D as o,ak as i,al as r,af as c,A as d,u as l}from"./index-DY0DW88M.js";import{T as u}from"./index-r5dAL4oY.js";import{useCalendarEventStore as p}from"./calendarEvents-B6LH1_nk.js";import{computed as h}from"./reactiveCustomization-B8WwDagp.js";import v from"./BaseIcon-Bb2ZVMd4.js";import{c as f}from"./accessToken-q_Kr5K6L.js";import{S as g}from"./SmoothReflow-Cnw3bIxd.js";import{u as _}from"./useAllComponentsMounted-RTvHVD2I.js";import{n as y}from"./_plugin-vue2_normalizer-DeUNqxFl.js";import"./Logger-CErMjlBd.js";import"./DataSyncService-BnTv72BN.js";import"./pinia-bvFMkYCE.js";import"./localStorage-B4mFdj8F.js";import"./legacyUserMigration-eNETLKah.js";import"./enums-C0TfsRui.js";import"./migrateLegacyUserMessageHandler-HceDQnYT.js";import"./auth-HiWjNVol.js";import"./persistStore-CE5fTtZd.js";import"./embeddedApp-R3YDNjex.js";import"./experiments-D9-xSE76.js";import"./flashMessageQueue-Byrek2Yp.js";import"./info-DdD9a7JK.js";import"./constants-Bt_TxKWw.js";import"./dynamic-import-helper-DIl3ayLm.js";import"./index-BaInu6ja.js";import"./appZStack-B9FmF8l5.js";import"./ResizeSensor-ZXOsDHeC.js";import"./promisifiedChrome-B6V9WMyE.js";import"./modal-DiTGFINU.js";import"./index-BRbZHaSZ.js";const S=y(e({name:"Schedule",components:{ThreeColLayout:u,BaseIcon:v,Launchpad:()=>t((()=>import("./Launchpad-W4P1awiv.js")),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19])),SmoothReflow:g},setup:()=>({..._(),formatTime:n,calendarEventStore:p(),MS_IN_1_MINUTE:a,openWindow:s,connectToGoogleCalendar:f,isSafari:o()}),computed:{launchpadVisible:()=>h.launchpadVisible,todayDate(){const t=m.models.date.get("hour").getTime();return new Date(t).getDate()},today(){const t=m.models.date.get("hour").getTime(),e=new Date(t);return`${i(e,!1)} ${r(e)}`},todayEvents(){const t=m.models.date.get("date").getTime();return this.calendarEventStore.getEventsForDay(0).map((e=>({...e,isInMoreThan5Minutes:e.start>t+5*a,timeUntilString:e.start>t+45*a?"in "+Math.round((e.start-t)/c)+" hr":"in "+Math.round((e.start-t)/a)+" min"}))).filter((t=>!t.allDay&&t.end>m.models.date.get("date").getTime()))},event(){return this.todayEvents[0]},todayEventsString(){const t=this.todayEvents.length-1;return t<=0?"":"+"+t+" more"},focusUntilString(){var t;if(!this.calendarEventStore.nextEvent)return"";const e=(null==(t=this.calendarEventStore.nextEvent)?void 0:t.start)-5*a;return m.models.date.get("date").getTime()>=e?"":n(new Date(e))},ctaButton(){if(!this.calendarEventStore.linked)return{action:()=>f("center below calendar"),icon:"icon/google-calendar",text:"Connect to Google Calendar"};if(this.event&&!this.event.isInMoreThan5Minutes&&this.event.meetingLink){const t=this.event.meetingLink;return{action:()=>s(t),icon:"icon-log-in",text:"Join meeting"}}if(this.event&&this.event.isInMoreThan5Minutes&&this.focusUntilString&&!this.$touch)return{action:this.countdownFocus,icon:"icon/apps/focus-mode",text:"Focus until "+this.focusUntilString};if(this.event){const t=this.event;return{action:()=>this.openEvent(t),icon:"icon/date/calendar-link",text:"Open event"}}return this.$touch?null:{action:this.startFocusMode,icon:"icon/apps/focus-mode",text:"Start Focusing"}}},mounted(){this.calendarEventStore.refresh()},methods:{async countdownFocus(){d.capture("calendar focus until event click",{feature:"calendar"});const e=(await t((async()=>{const{usePomodoroSessionStore:t}=await import("./pomodoroCompleted-Cm_ahB75.js").then((t=>t.b));return{usePomodoroSessionStore:t}}),__vite__mapDeps([20,8,2,3,4,5,21,22,23,24,15,6,25,26,27,28,17,29,30,16]))).usePomodoroSessionStore();await l((()=>e.loaded)).toBe(!0),e.playing&&await e.complete({switchAfterComplete:!1,completedManually:!0}),await e.update({countDownTimerLength:this.calendarEventStore.nextEvent.start-Date.now()-5*a}),this.startFocusMode()},startFocusMode(){m.trigger("focusMode:start")},openEvent(t){d.capture("calendar event click",{feature:"calendar"}),s(t.link)}}}),(function(){var t=this,e=t._self._c;return t._self._setupProxy,e("div",{staticClass:"dash-schedule app-container hide-apps-no-fade",attrs:{"data-test":"dash-schedule"}},[e("div",{staticClass:"scrim hide-apps-fade"}),e("three-col-layout",{staticClass:"has-dash-icon big-search-wrapper",scopedSlots:t._u([{key:"left",fn:function(){return[t._t("nav")]},proxy:!0},{key:"center",fn:function(){return[e("div",{staticClass:"schedule hide-apps-fade-children"},[e("div",{staticClass:"schedule-buttons hide-apps-fade-children-exception"},[t.ctaButton?e("div",{staticClass:"button dash-button blurred hide-apps-fade",attrs:{"data-test":"calendar-cta"},on:{click:t.ctaButton.action}},[e("span",[e("base-icon",{attrs:{src:t.ctaButton.icon,size:"16px"}}),t._v(" "+t._s(t.ctaButton.text)+" ")],1)]):t._e()]),e("div",{staticClass:"schedule-below-buttons",attrs:{"data-test":"description-line"}},[e("svg",{staticClass:"calendar-icon-with-text",attrs:{width:"19",height:"19",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"}},[e("path",{attrs:{d:"M8 2V6M16 2V6M5 4H19C20.1046 4 21 4.89543 21 6V20C21 21.1046 20.1046 22 19 22H5C3.89543 22 3 21.1046 3 20V6C3 4.89543 3.89543 4 5 4Z",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}}),e("text",{attrs:{x:"50%",y:"60%","dominant-baseline":"middle","text-anchor":"middle"}},[t._v(t._s(t.todayDate))])]),t.calendarEventStore.linked?t.event?t.event?[e("div",{staticClass:"event",on:{click:function(e){return t.openWindow(t.event.link)}}},[e("div",{staticClass:"summary"},[t._v(t._s(t.event.summary))]),e("div",[t._v(t._s(t.formatTime(new Date(t.event.start)))+" - "+t._s(t.formatTime(new Date(t.event.end))))])]),t.todayEventsString?e("div",{staticClass:"more-events",on:{click:function(e){return t.openWindow("https://calendar.google.com/calendar/u/0/r/day")}}},[t._v(t._s(t.todayEventsString))]):t._e(),t.calendarEventStore.staleDataWarningVisible?e("base-icon",{attrs:{src:"icon/info",title:"There was an issue getting your events. The data you see may not be up to date"}}):t._e()]:t._e():e("div",[t._v("No events")]):e("div",[t._v("Connect your calendar to see your next events")])],2)])]},proxy:!0}],null,!0)}),t.isSafari?t._e():e("smooth-reflow",{staticClass:"launchpad-container",attrs:{"await-apps-ready":!0}},[t.launchpadVisible?e("launchpad"):t._e()],1)],1)}),[],!1,null,"956c946c").exports;export{S as default};